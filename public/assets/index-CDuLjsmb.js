import{r as d,a as Re,R as Fe}from"./react-vendor-wGySg1uH.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const p of s)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function r(s){const p={};return s.integrity&&(p.integrity=s.integrity),s.referrerPolicy&&(p.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?p.credentials="include":s.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function n(s){if(s.ep)return;s.ep=!0;const p=r(s);fetch(s.href,p)}})();var Le={exports:{}},ge={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De=d,Ee=Symbol.for("react.element"),Ie=Symbol.for("react.fragment"),_e=Object.prototype.hasOwnProperty,Ge=De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oe={key:!0,ref:!0,__self:!0,__source:!0};function $e(t,a,r){var n,s={},p=null,m=null;r!==void 0&&(p=""+r),a.key!==void 0&&(p=""+a.key),a.ref!==void 0&&(m=a.ref);for(n in a)_e.call(a,n)&&!Oe.hasOwnProperty(n)&&(s[n]=a[n]);if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Ee,type:t,key:p,ref:m,props:s,_owner:Ge.current}}ge.Fragment=Ie;ge.jsx=$e;ge.jsxs=$e;Le.exports=ge;var e=Le.exports,be={},ke=Re;be.createRoot=ke.createRoot,be.hydrateRoot=ke.hydrateRoot;var Se={},Ve="@vercel/speed-insights",Ue="1.3.1",ze=()=>{window.si||(window.si=function(...a){(window.siq=window.siq||[]).push(a)})};function Ze(){return typeof window<"u"}function He(){try{const t="production"}catch{}return"production"}function Pe(){return He()==="development"}function Ye(t){return t.scriptSrc?t.scriptSrc:Pe()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":t.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":t.basePath?`${t.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function Qe(t={}){var a;if(!Ze()||t.route===null)return null;ze();const r=Ye(t);if(document.head.querySelector(`script[src*="${r}"]`))return null;t.beforeSend&&((a=window.si)==null||a.call(window,"beforeSend",t.beforeSend));const n=document.createElement("script");return n.src=r,n.defer=!0,n.dataset.sdkn=Ve+(t.framework?`/${t.framework}`:""),n.dataset.sdkv=Ue,t.sampleRate&&(n.dataset.sampleRate=t.sampleRate.toString()),t.route&&(n.dataset.route=t.route),t.endpoint?n.dataset.endpoint=t.endpoint:t.basePath&&(n.dataset.endpoint=`${t.basePath}/speed-insights/vitals`),t.dsn&&(n.dataset.dsn=t.dsn),Pe()&&t.debug===!1&&(n.dataset.debug="false"),n.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${r}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(n),{setRoute:s=>{n.dataset.route=s??void 0}}}function Je(){if(!(typeof process>"u"||typeof Se>"u"))return Se.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function Xe(t){d.useEffect(()=>{var r;t.beforeSend&&((r=window.si)==null||r.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]);const a=d.useRef(null);return d.useEffect(()=>{if(a.current)t.route&&a.current(t.route);else{const r=Qe({framework:t.framework??"react",basePath:t.basePath??Je(),...t});r&&(a.current=r.setRoute)}},[t.route]),null}const M="/api",ie={Trophy:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"})}),ChartBar:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),Cog:()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),Plus:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Refresh:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),Clock:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),User:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),Snowflake:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v18m0-18l-3 3m3-3l3 3m-3 15l-3-3m3 3l3-3M3 12h18M3 12l3-3m-3 3l3 3m15-3l-3-3m3 3l-3 3M7.5 7.5l9 9m-9 0l9-9"})})},ve={User:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),Star:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})}),Bolt:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})}),Fire:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"})}),Heart:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),Rocket:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})}),Trophy:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"})}),Crown:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{d:"M12 2L14.5 8.5L21 9.5L16 14L17.5 21L12 17.5L6.5 21L8 14L3 9.5L9.5 8.5L12 2Z"})}),Sparkles:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})}),Face:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"})}),Cube:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-full h-full p-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),Target:()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"w-full h-full p-1",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]})},qe=Object.keys(ve);let pe={};const Ke=t=>{Array.isArray(t)&&t.forEach(a=>{a.avatar&&(pe[a.name]=a.avatar)})},We=t=>t?pe[t]?pe[t]:JSON.parse(localStorage.getItem("pingpong_avatars")||"{}")[t]||null:null,Ce=async(t,a)=>{const r=JSON.parse(localStorage.getItem("pingpong_avatars")||"{}");a?(r[t]=a,pe[t]=a):(delete r[t],delete pe[t]),localStorage.setItem("pingpong_avatars",JSON.stringify(r));try{await fetch(`${M}/players/${encodeURIComponent(t)}/avatar`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:a||null})})}catch(n){console.error("Failed to save avatar to database:",n)}};function E({name:t,size:a="md",onClick:r}){const n=We(t),s=t?t.split(" ").map(i=>i[0]).join("").toUpperCase().slice(0,2):"?",p=["bg-violet-500","bg-blue-500","bg-emerald-500","bg-amber-500","bg-rose-500","bg-cyan-500"],m=t?t.charCodeAt(0)%p.length:0,h={sm:"w-6 h-6 text-xs",md:"w-8 h-8 text-sm",lg:"w-10 h-10 text-base"},k=n?ve[n]:null;return e.jsx("div",{className:`${h[a]} ${p[m]} rounded-full flex items-center justify-center text-white font-semibold ${r?"cursor-pointer hover:ring-2 hover:ring-white/50":""}`,onClick:r,title:r?"Click to change avatar":t,children:k?e.jsx(k,{}):s})}function Me({playerName:t,onClose:a,onSelect:r}){const n=We(t),s=["bg-violet-500","bg-blue-500","bg-emerald-500","bg-amber-500","bg-rose-500","bg-cyan-500"],p=t?t.charCodeAt(0)%s.length:0,m=async k=>{await Ce(t,k),r==null||r(k),a()},h=async()=>{await Ce(t,null),r==null||r(null),a()};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:a,children:e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 max-w-md w-full mx-4",onClick:k=>k.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-2 text-center",children:"Choose Avatar"}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-4",children:t}),e.jsx("div",{className:"grid grid-cols-6 gap-3 mb-4",children:qe.map(k=>{const i=ve[k],o=n===k;return e.jsx("button",{onClick:()=>m(k),className:`w-12 h-12 ${s[p]} rounded-full flex items-center justify-center text-white transition-all ${o?"ring-2 ring-white scale-110":"hover:scale-105"}`,title:k,children:e.jsx(i,{})},k)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:h,className:"flex-1 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-sm",children:"Use Initials"}),e.jsx("button",{onClick:a,className:"flex-1 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg text-sm",children:"Done"})]})]})})}const me={Warning:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),ArrowDown:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"})}),ArrowUp:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"})}),Bolt:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})}),ArrowsUpDown:()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})})};function es({swapZone:t}){var a,r,n;return t!=null&&t.active?e.jsxs("div",{className:"bg-gradient-to-r from-red-100 via-gray-100 to-green-100 border border-gray-300 rounded-xl p-4 mb-6 animate-slideIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-amber-600",children:e.jsx(me.ArrowsUpDown,{})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"MID-SEASON SWAP ZONE"}),e.jsx("div",{className:"text-amber-600",children:e.jsx(me.Warning,{})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[t.playersReady,"/",t.totalPlayers," players ready"]}),e.jsx("div",{className:`font-bold ${t.swapReady?"text-green-500 animate-pulse":t.playersReady>=t.totalPlayers*.7?"text-amber-500":"text-gray-600"}`,children:t.swapReady?"✓ Swap Ready!":`${t.totalPlayers-t.playersReady} players need 4 games`})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-rose-900/30 border border-rose-600/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"text-red-500",children:e.jsx(me.ArrowDown,{})}),e.jsx("span",{className:"font-bold text-red-500 uppercase tracking-wide text-sm",children:"RELEGATION ZONE"})]}),e.jsx("p",{className:"text-xs text-rose-300/70 mb-2",children:"Bottom 3 of Group A move DOWN to Group B"}),e.jsx("div",{className:"space-y-1",children:(a=t.relegationZone)==null?void 0:a.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-rose-900/40 rounded px-2 py-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-red-500 font-bold",children:["#",s.rank]}),e.jsx(E,{name:s.name,size:"sm"}),e.jsx("span",{className:"text-sm text-white",children:s.name})]}),e.jsxs("span",{className:"text-xs text-rose-300",children:[s.wins,"W-",s.losses,"L",s.gamesPlayed!==void 0&&e.jsxs("span",{className:"ml-1 opacity-70",children:["(",s.gamesPlayed,"g)"]})]})]},s.name))})]}),e.jsxs("div",{className:"bg-emerald-900/30 border border-emerald-600/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"text-green-600",children:e.jsx(me.ArrowUp,{})}),e.jsx("span",{className:"font-bold text-green-600 uppercase tracking-wide text-sm",children:"PROMOTION ZONE"})]}),e.jsx("p",{className:"text-xs text-emerald-300/70 mb-2",children:"Top 3 of Group B move UP to Group A"}),e.jsx("div",{className:"space-y-1",children:(r=t.promotionZone)==null?void 0:r.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-emerald-900/40 rounded px-2 py-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-green-600 font-bold",children:["#",s.rank]}),e.jsx(E,{name:s.name,size:"sm"}),e.jsx("span",{className:"text-sm text-white",children:s.name})]}),e.jsxs("span",{className:"text-xs text-emerald-300",children:[s.wins,"W-",s.losses,"L",s.gamesPlayed!==void 0&&e.jsxs("span",{className:"ml-1 opacity-70",children:["(",s.gamesPlayed,"g)"]})]})]},s.name))})]})]}),((n=t.bubble)==null?void 0:n.length)>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"text-amber-600",children:e.jsx(me.Bolt,{})}),e.jsx("span",{className:"text-sm font-semibold text-amber-600",children:"ON THE BUBBLE"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.bubble.map(s=>e.jsxs("div",{className:"flex items-center gap-2 bg-amber-900/30 border border-amber-600/50 rounded px-2 py-1 text-sm",children:[e.jsxs("span",{className:"text-amber-600",children:["#",s.rank," G",s.group]}),e.jsx("span",{className:"text-white",children:s.name}),e.jsxs("span",{className:"text-xs text-amber-300",children:["- ",s.message]})]},s.name))})]})]}):null}function Ae({standings:t,groupName:a,groupLabel:r}){const n=d.useMemo(()=>Object.entries(t||{}).map(([s,p])=>({name:s,...p})).sort((s,p)=>{if(p.wins!==s.wins)return p.wins-s.wins;const m=s.pointsFor-s.pointsAgainst,h=p.pointsFor-p.pointsAgainst;return h!==m?h-m:p.pointsFor!==s.pointsFor?p.pointsFor-s.pointsFor:s.pointsAgainst-p.pointsAgainst}),[t]);return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2 text-gray-900",children:[e.jsx("span",{className:a==="A"?"text-purple-600":"text-amber-500",children:"●"}),"Group ",a,": ",r]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-500 border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:"text-left py-2 px-2",children:"#"}),e.jsx("th",{className:"text-left py-2 px-2",children:"Player"}),e.jsx("th",{className:"text-center py-2 px-2",children:"W"}),e.jsx("th",{className:"text-center py-2 px-2",children:"L"}),e.jsx("th",{className:"text-center py-2 px-2",children:"PF"}),e.jsx("th",{className:"text-center py-2 px-2",children:"PA"}),e.jsx("th",{className:"text-center py-2 px-2",children:"Diff"}),e.jsx("th",{className:"text-center py-2 px-2",children:"Streak"})]})}),e.jsx("tbody",{children:n.map((s,p)=>e.jsxs("tr",{className:`border-b border-gray-100 ${p<4?"bg-purple-50":""}`,children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("span",{className:p<4?"text-purple-600 font-bold":"text-gray-400",children:p+1})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{name:s.name,size:"sm"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.name}),s.promotedFrom==="B"&&e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-1 rounded",title:"Promoted from Group B",children:"⬆️"}),s.promotedFrom==="A"&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-1 rounded",title:"Moved from Group A",children:"⬇️"})]})}),e.jsx("td",{className:"text-center py-2 px-2 text-green-600 font-semibold",children:s.wins}),e.jsx("td",{className:"text-center py-2 px-2 text-red-500",children:s.losses}),e.jsx("td",{className:"text-center py-2 px-2 text-gray-700",children:s.pointsFor}),e.jsx("td",{className:"text-center py-2 px-2 text-gray-700",children:s.pointsAgainst}),e.jsx("td",{className:"text-center py-2 px-2",children:e.jsxs("span",{className:s.pointsFor-s.pointsAgainst>=0?"text-green-600":"text-red-500",children:[s.pointsFor-s.pointsAgainst>=0?"+":"",s.pointsFor-s.pointsAgainst]})}),e.jsxs("td",{className:"text-center py-2 px-2",children:[s.streak>0&&e.jsxs("span",{className:"text-green-600",children:["W",s.streak]}),s.streak<0&&e.jsxs("span",{className:"text-red-500",children:["L",Math.abs(s.streak)]}),s.streak===0&&e.jsx("span",{className:"text-gray-400",children:"-"})]})]},s.name))})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Top 4 advance to playoffs"})]})}function ss({matches:t,week:a,onRecordResult:r}){const[n,s]=d.useState(null),[p,m]=d.useState(null),[h,k]=d.useState(""),[i,o]=d.useState(""),b=()=>{if(!p)return;const y=parseInt(h)||0,c=parseInt(i)||0;if(Math.max(y,c)>2||y===2&&c===2){alert("Best of 3: Winner needs 2 wins. Valid scores: 2-0, 2-1");return}const v=p===n.player1?n.player2:n.player1;r(n.id,p,v,y,c),s(null),m(null),k(""),o("")};return e.jsxs("div",{className:"space-y-2",children:[t.map(y=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${y.completed?"bg-gray-100/50":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(E,{name:y.player1,size:"sm"}),e.jsx("span",{className:y.winner===y.player1?"text-green-600 font-semibold":"",children:y.player1})]}),e.jsx("div",{className:"text-gray-500 text-sm",children:"vs"}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[e.jsx("span",{className:y.winner===y.player2?"text-green-600 font-semibold":"",children:y.player2}),e.jsx(E,{name:y.player2,size:"sm"})]})]}),e.jsx("div",{className:"ml-4 w-24 text-right",children:y.completed?e.jsxs("span",{className:"text-green-600 font-semibold",children:[y.score1," - ",y.score2]}):e.jsx("button",{onClick:()=>s(y),className:"text-xs bg-purple-600 hover:bg-purple-700 px-3 py-1 rounded-lg",children:"Record"})})]},y.id)),n&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>s(null),children:e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 max-w-sm w-full animate-slideIn",onClick:y=>y.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-center",children:"Record Result"}),e.jsxs("p",{className:"text-center text-gray-500 mb-4",children:[n.player1," vs ",n.player2]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Who won?"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[n.player1,n.player2].map(y=>e.jsxs("button",{onClick:()=>m(y),className:`p-3 rounded-lg transition ${p===y?"bg-emerald-600":"bg-gray-200 hover:bg-gray-300"}`,children:[e.jsx(E,{name:y,size:"sm"}),e.jsx("div",{className:"mt-1 text-sm font-medium",children:y})]},y))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Score (Best of 3: 2-0 or 2-1)"}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("input",{type:"number",min:"0",max:"2",value:h,onChange:y=>k(y.target.value),className:"w-16 bg-gray-200 text-center text-xl rounded-lg p-2",placeholder:"0"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("input",{type:"number",min:"0",max:"2",value:i,onChange:y=>o(y.target.value),className:"w-16 bg-gray-200 text-center text-xl rounded-lg p-2",placeholder:"0"})]})]}),e.jsx("button",{onClick:b,disabled:!p,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-200 disabled:text-gray-500 rounded-lg font-semibold",children:"Save Result"})]})})]})}function Be({playoff:t,groupName:a,onRecordResult:r}){if(!t)return null;const n=({match:m,label:h})=>{const[k,i]=d.useState(!1),[o,b]=d.useState(null),[y,c]=d.useState(""),[v,A]=d.useState(""),$=()=>{if(!o)return;const P=parseInt(y)||0,I=parseInt(v)||0;if(Math.max(P,I)>2||P===2&&I===2){alert("Best of 3: Winner needs 2 wins. Valid scores: 2-0, 2-1");return}const O=o===m.player1?m.player2:m.player1;r(m.id,o,O,P,I),i(!1)},C=m.player1&&m.player2&&!m.completed;return e.jsxs("div",{className:"bg-gray-100 rounded-lg p-3 w-48",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:h}),e.jsxs("div",{className:`flex items-center gap-2 mb-1 ${m.winner===m.player1?"text-green-600":""}`,children:[m.player1?e.jsxs(e.Fragment,{children:[e.jsx(E,{name:m.player1,size:"sm"}),e.jsx("span",{className:"text-sm truncate",children:m.player1})]}):e.jsx("span",{className:"text-gray-500 italic text-sm",children:"TBD"}),m.seed1&&e.jsxs("span",{className:"text-xs text-gray-500",children:["#",m.seed1]})]}),e.jsxs("div",{className:`flex items-center gap-2 ${m.winner===m.player2?"text-green-600":""}`,children:[m.player2?e.jsxs(e.Fragment,{children:[e.jsx(E,{name:m.player2,size:"sm"}),e.jsx("span",{className:"text-sm truncate",children:m.player2})]}):e.jsx("span",{className:"text-gray-500 italic text-sm",children:"TBD"}),m.seed2&&e.jsxs("span",{className:"text-xs text-gray-500",children:["#",m.seed2]})]}),m.completed?e.jsxs("div",{className:"mt-2 text-center text-green-600 font-semibold text-sm",children:[m.score1," - ",m.score2]}):C?e.jsx("button",{onClick:()=>i(!0),className:"mt-2 w-full text-xs bg-purple-600 hover:bg-purple-700 py-1 rounded",children:"Record"}):null,k&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>i(!1),children:e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 max-w-sm w-full",onClick:P=>P.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-center",children:h}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[m.player1,m.player2].map(P=>e.jsxs("button",{onClick:()=>b(P),className:`p-3 rounded-lg ${o===P?"bg-emerald-600":"bg-gray-200"}`,children:[e.jsx(E,{name:P,size:"sm"}),e.jsx("div",{className:"mt-1 text-sm",children:P})]},P))}),e.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"Score (Best of 3: 2-0 or 2-1)"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("input",{type:"number",min:"0",max:"2",value:y,onChange:P=>c(P.target.value),className:"w-16 bg-gray-200 text-center text-xl rounded-lg p-2",placeholder:"0"}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"number",min:"0",max:"2",value:v,onChange:P=>A(P.target.value),className:"w-16 bg-gray-200 text-center text-xl rounded-lg p-2",placeholder:"0"})]}),e.jsx("button",{onClick:$,disabled:!o,className:"w-full py-3 bg-emerald-600 disabled:bg-gray-200 rounded-lg font-semibold",children:"Save"})]})})]})},s={A:{bg:"bg-emerald-900/30",border:"border-emerald-500",accent:"text-green-600",glow:"shadow-emerald-500/20"},B:{bg:"bg-amber-900/30",border:"border-amber-500",accent:"text-amber-600",glow:"shadow-amber-500/20"}},p=s[a]||s.A;return e.jsxs("div",{className:`bg-white shadow-sm border border-gray-200 rounded-xl p-6 border ${p.border} shadow-lg ${p.glow}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${p.bg} border ${p.border} flex items-center justify-center font-bold ${p.accent}`,children:a}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold",children:["Group ",a," Playoffs"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Single elimination bracket"})]})]}),e.jsxs("div",{className:"flex gap-6 items-center overflow-x-auto pb-4",children:[e.jsxs("div",{className:"flex flex-col gap-6 relative",children:[e.jsx("div",{className:`text-xs ${p.accent} font-semibold text-center uppercase tracking-wide mb-2`,children:"Semifinals"}),t.semifinals.map((m,h)=>{const k=m.seed1==="WC"?"WC":`#${m.seed1}`,i=m.seed2==="WC"?"WC":`#${m.seed2}`;return e.jsx(n,{match:m,label:`${k} vs ${i}`},m.id)}),e.jsx("div",{className:"absolute right-0 top-16 h-24 w-8 border-r-2 border-t-2 border-b-2 border-gray-400 rounded-r-lg"})]}),e.jsx("div",{className:`${p.accent} px-2`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-8 h-8",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`text-xs ${p.accent} font-semibold text-center uppercase tracking-wide mb-2`,children:"Final"}),e.jsx(n,{match:t.final,label:"Championship"}),t.champion&&e.jsxs("div",{className:`mt-4 text-center px-4 py-2 rounded-lg ${p.bg} border ${p.border}`,children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Champion"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 text-amber-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-2.992 0"})}),e.jsx("span",{className:`font-bold text-lg ${p.accent}`,children:t.champion})]})]})]})]})]})}function ts({championship:t,onRecordResult:a}){if(!t)return null;const r=({match:n,label:s,showSeeds:p=!0})=>{const[m,h]=d.useState(!1),[k,i]=d.useState(null),[o,b]=d.useState(""),[y,c]=d.useState(""),v=()=>{if(!k)return;const C=parseInt(o)||0,P=parseInt(y)||0;if(Math.max(C,P)>2||C===2&&P===2){alert("Best of 3: Winner needs 2 wins. Valid scores: 2-0, 2-1");return}const I=k===n.player1?n.player2:n.player1;a(n.id,k,I,C,P),h(!1)},A=n.player1&&n.player2&&!n.completed,$=C=>C==="A"?"text-green-600":C==="B"?"text-amber-600":"text-gray-500";return e.jsxs("div",{className:"bg-gray-100 rounded-lg p-3 w-52",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2 font-semibold",children:s}),e.jsx("div",{className:`flex items-center gap-2 mb-1 ${n.winner===n.player1?"text-green-600 font-semibold":""}`,children:n.player1?e.jsxs(e.Fragment,{children:[e.jsx(E,{name:n.player1,size:"sm"}),e.jsx("span",{className:"text-sm truncate flex-1",children:n.player1}),p&&n.seed1&&e.jsx("span",{className:`text-xs ${$(n.player1Group)}`,children:n.seed1})]}):e.jsx("span",{className:"text-gray-500 italic text-sm",children:"TBD"})}),e.jsx("div",{className:`flex items-center gap-2 ${n.winner===n.player2?"text-green-600 font-semibold":""}`,children:n.player2?e.jsxs(e.Fragment,{children:[e.jsx(E,{name:n.player2,size:"sm"}),e.jsx("span",{className:"text-sm truncate flex-1",children:n.player2}),p&&n.seed2&&e.jsx("span",{className:`text-xs ${$(n.player2Group)}`,children:n.seed2})]}):e.jsx("span",{className:"text-gray-500 italic text-sm",children:"TBD"})}),n.completed?e.jsxs("div",{className:"mt-2 text-center text-green-600 font-semibold text-sm",children:[n.score1," - ",n.score2]}):A?e.jsx("button",{onClick:()=>h(!0),className:"mt-2 w-full text-xs bg-purple-600 hover:bg-purple-700 py-1 rounded",children:"Record"}):null,m&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>h(!1),children:e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 max-w-sm w-full",onClick:C=>C.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-center",children:s}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[n.player1,n.player2].map(C=>e.jsxs("button",{onClick:()=>i(C),className:`p-3 rounded-lg ${k===C?"bg-emerald-600":"bg-gray-200"}`,children:[e.jsx(E,{name:C,size:"sm"}),e.jsx("div",{className:"mt-1 text-sm",children:C})]},C))}),e.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"Score (Best of 3: 2-0 or 2-1)"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("input",{type:"number",min:"0",max:"2",value:o,onChange:C=>b(C.target.value),className:"w-16 bg-gray-200 text-center text-xl rounded-lg p-2",placeholder:"0"}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"number",min:"0",max:"2",value:y,onChange:C=>c(C.target.value),className:"w-16 bg-gray-200 text-center text-xl rounded-lg p-2",placeholder:"0"})]}),e.jsx("button",{onClick:v,disabled:!k,className:"w-full py-3 bg-emerald-600 disabled:bg-gray-200 rounded-lg font-semibold",children:"Save"})]})})]})};return e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 border border-violet-500 shadow-lg shadow-violet-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-violet-900/50 border border-violet-500 flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 text-amber-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-2.992 0"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-violet-300",children:"Championship Bracket"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Top 4 from each group compete for the title"})]})]}),e.jsxs("div",{className:"flex gap-4 items-start overflow-x-auto pb-4",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"text-xs text-purple-600 font-semibold text-center uppercase tracking-wide mb-1",children:"Quarterfinals"}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx(r,{match:t.quarterfinals[0],label:"QF1: A#1 vs B#4"}),e.jsx(r,{match:t.quarterfinals[1],label:"QF2: B#2 vs A#3"})]}),e.jsx("div",{className:"h-4"}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx(r,{match:t.quarterfinals[2],label:"QF3: A#2 vs B#3"}),e.jsx(r,{match:t.quarterfinals[3],label:"QF4: B#1 vs A#4"})]})]}),e.jsx("div",{className:"text-purple-600 px-2 pt-24",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-8 h-8",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})}),e.jsxs("div",{className:"flex flex-col gap-4 pt-8",children:[e.jsx("div",{className:"text-xs text-purple-600 font-semibold text-center uppercase tracking-wide mb-1",children:"Semifinals"}),e.jsxs("div",{className:"flex flex-col gap-32",children:[e.jsx(r,{match:t.semifinals[0],label:"SF1: QF1 Winner vs QF2 Winner",showSeeds:!1}),e.jsx(r,{match:t.semifinals[1],label:"SF2: QF3 Winner vs QF4 Winner",showSeeds:!1})]})]}),e.jsx("div",{className:"text-purple-600 px-2 pt-32",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-8 h-8",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})}),e.jsxs("div",{className:"flex flex-col items-center pt-24",children:[e.jsx("div",{className:"text-xs text-amber-600 font-semibold text-center uppercase tracking-wide mb-1",children:"Championship Final"}),e.jsx(r,{match:t.final,label:"Grand Final",showSeeds:!1}),t.champion&&e.jsxs("div",{className:"mt-4 text-center px-6 py-3 rounded-lg bg-gradient-to-r from-amber-900/50 to-violet-900/50 border border-amber-500",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Season Champion"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 text-amber-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-2.992 0"})}),e.jsx("span",{className:"font-bold text-lg text-amber-600",children:t.champion})]})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-300",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-green-600",children:"A#1-4"})," = Group A seeds"]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-amber-600",children:"B#1-4"})," = Group B seeds"]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-purple-600",children:"WC"})," = Wildcard winner"]})]})})]})}function as({wildcard:t,onRecordResult:a}){if(!(t!=null&&t.matches))return null;const r=({match:n})=>{const[s,p]=d.useState(!1),[m,h]=d.useState(null),[k,i]=d.useState(""),[o,b]=d.useState(""),y=()=>{if(!m)return;const c=parseInt(k)||0,v=parseInt(o)||0;if(Math.max(c,v)>2||c===2&&v===2){alert("Best of 3: Winner needs 2 wins. Valid scores: 2-0, 2-1");return}const A=m===n.player1?n.player2:n.player1;a(n.id,m,A,c,v),p(!1)};return e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:n.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`text-center ${n.winner===n.player1?"ring-2 ring-emerald-400 rounded-lg p-1":""}`,children:[e.jsx(E,{name:n.player1,size:"sm"}),e.jsx("div",{className:"text-xs mt-1",children:n.player1}),e.jsxs("div",{className:"text-xs text-green-600",children:["Group ",n.player1Group]})]}),e.jsx("div",{className:"text-gray-500 text-lg",children:"vs"}),e.jsxs("div",{className:`text-center ${n.winner===n.player2?"ring-2 ring-emerald-400 rounded-lg p-1":""}`,children:[e.jsx(E,{name:n.player2,size:"sm"}),e.jsx("div",{className:"text-xs mt-1",children:n.player2}),e.jsxs("div",{className:"text-xs text-amber-600",children:["Group ",n.player2Group]})]})]}),n.completed?e.jsxs("div",{className:"text-green-600 font-bold",children:[n.score1," - ",n.score2]}):e.jsx("button",{onClick:()=>p(!0),className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm",children:"Record"})]}),n.completed&&e.jsxs("div",{className:"mt-2 text-sm text-center",children:[e.jsx("span",{className:"text-green-600 font-semibold",children:n.winner}),e.jsxs("span",{className:"text-gray-500",children:[" earns wildcard to Group ",n.winner===n.player1?n.player1Group:n.player2Group," playoffs!"]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>p(!1),children:e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 max-w-sm w-full",onClick:c=>c.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-center",children:"Wildcard Match"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[n.player1,n.player2].map(c=>e.jsxs("button",{onClick:()=>h(c),className:`p-3 rounded-lg ${m===c?"bg-emerald-600":"bg-gray-200"}`,children:[e.jsx(E,{name:c,size:"sm"}),e.jsx("div",{className:"mt-1 text-sm",children:c})]},c))}),e.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"Score (Best of 3: 2-0 or 2-1)"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("input",{type:"number",min:"0",max:"2",value:k,onChange:c=>i(c.target.value),className:"w-16 bg-gray-200 text-center text-xl rounded-lg p-2",placeholder:"0"}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"number",min:"0",max:"2",value:o,onChange:c=>b(c.target.value),className:"w-16 bg-gray-200 text-center text-xl rounded-lg p-2",placeholder:"0"})]}),e.jsx("button",{onClick:y,disabled:!m,className:"w-full py-3 bg-emerald-600 disabled:bg-gray-200 rounded-lg font-semibold",children:"Save"})]})})]})};return e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-600",children:"⚡"})," Wildcard Round"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Group A #5-6 vs Group B #5-6 - Cross-group showdown for playoff spots!"}),e.jsxs("div",{className:"text-xs text-gray-500 mb-4 bg-gray-100/50 rounded-lg p-2",children:[e.jsx("strong",{children:"Stakes:"})," Winner earns a wildcard spot in their ",e.jsx("em",{children:"own"})," group's playoffs. Beat the player at your same rank from the other group to prove you deserve a playoff spot!"]}),e.jsx("div",{className:"space-y-3",children:t.matches.map(n=>e.jsx(r,{match:n},n.id))})]})}function rs({match:t,onRecordResult:a}){const[r,n]=d.useState(!1),[s,p]=d.useState(null),[m,h]=d.useState(""),[k,i]=d.useState(""),o=()=>{if(!s)return;const b=parseInt(m)||0,y=parseInt(k)||0;if(Math.max(b,y)>2||b===2&&y===2){alert("Best of 3: Winner needs 2 wins. Valid scores: 2-0, 2-1");return}const c=s===t.player1?t.player2:t.player1;a(t.id,s,c,b,y),n(!1),confetti({particleCount:200,spread:100,origin:{y:.6}})};return e.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-yellow-900/50 border-2 border-amber-500/50 rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-12 h-12 text-amber-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-2.992 0"})})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"MAMMOTOME PING PONG FINALE"}),e.jsxs("div",{className:"flex items-center justify-center gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Group A Champion"}),e.jsx(E,{name:t.player1,size:"lg"}),e.jsx("div",{className:`mt-2 font-bold ${t.winner===t.player1?"text-amber-600":""}`,children:t.player1})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-500",children:"VS"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Group B Champion"}),e.jsx(E,{name:t.player2,size:"lg"}),e.jsx("div",{className:`mt-2 font-bold ${t.winner===t.player2?"text-amber-600":""}`,children:t.player2})]})]}),t.completed?e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-amber-600",children:[t.score1," - ",t.score2]}),e.jsxs("div",{className:"text-xl mt-2 flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 text-amber-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})}),e.jsxs("span",{children:[t.winner," is the Champion!"]}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 text-amber-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})})]})]}):t.player1&&t.player2&&e.jsx("button",{onClick:()=>n(!0),className:"mt-4 bg-amber-600 hover:bg-amber-500 px-6 py-2 rounded-lg font-semibold",children:"Record Finale Result"}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>n(!1),children:e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 max-w-sm w-full",onClick:b=>b.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Finale Result"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.player1,t.player2].map(b=>e.jsxs("button",{onClick:()=>p(b),className:`p-4 rounded-lg ${s===b?"bg-amber-600":"bg-gray-200"}`,children:[e.jsx(E,{name:b,size:"md"}),e.jsx("div",{className:"mt-2 font-semibold",children:b})]},b))}),e.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"Score (Best of 3: 2-0 or 2-1)"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("input",{type:"number",min:"0",max:"2",value:m,onChange:b=>h(b.target.value),className:"w-20 bg-gray-200 text-center text-2xl rounded-lg p-2",placeholder:"0"}),e.jsx("span",{className:"text-xl",children:"-"}),e.jsx("input",{type:"number",min:"0",max:"2",value:k,onChange:b=>i(b.target.value),className:"w-20 bg-gray-200 text-center text-2xl rounded-lg p-2",placeholder:"0"})]}),e.jsxs("button",{onClick:o,disabled:!s,className:"w-full py-3 bg-amber-600 disabled:bg-gray-200 rounded-lg font-semibold flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-2.992 0"})}),"Crown the Champion"]})]})})]})}function ls({players:t,season:a,currentPlayer:r,onSelectPlayer:n}){var xe;const[s,p]=d.useState(()=>new Date().toISOString().split("T")[0]),[m,h]=d.useState({}),[k,i]=d.useState([]),[o,b]=d.useState([]),[y,c]=d.useState(!1),[v,A]=d.useState(null),[$,C]=d.useState(null),[P,I]=d.useState({}),[O,Q]=d.useState(!1),[re,V]=d.useState(!1),[U,q]=d.useState(null),[W,se]=d.useState(""),[J,_]=d.useState(""),[te,ae]=d.useState([]),[z,X]=d.useState(!1),[w,L]=d.useState(!1);d.useEffect(()=>{fetch(`${M}/league/matches`).then(u=>u.json()).then(u=>ae(u||[])).catch(()=>ae([]))},[]);const Z=d.useMemo(()=>{var g,S,B,j;if(!(a!=null&&a.groups))return t.map(x=>x.name);const u=((S=(g=a.groups.A)==null?void 0:g.players)==null?void 0:S.map(x=>x.name))||[],l=((j=(B=a.groups.B)==null?void 0:B.players)==null?void 0:j.map(x=>x.name))||[];return[...new Set([...u,...l,...t.map(x=>x.name)])].sort()},[a,t]),T=d.useMemo(()=>{if(!r)return[];const u=[];return a&&["A","B"].forEach(l=>{var g,S;(S=(g=a.schedule)==null?void 0:g[l])==null||S.forEach((B,j)=>{B.forEach(x=>{!x.completed&&(x.player1===r||x.player2===r)&&u.push({...x,weekNum:j+1,opponent:x.player1===r?x.player2:x.player1,group:l,type:"season"})})})}),te.forEach(l=>{if(!l.completed&&(l.player1===r||l.player2===r)&&l.player1&&l.player2&&l.player1!=="BYE"&&l.player2!=="BYE"){const g=l.player1===r?l.player2:l.player1;u.push({id:l.id,player1:l.player1,player2:l.player2,completed:l.completed,weekNum:null,opponent:g,group:"League",type:"league",round:l.round,matchNumber:l.match_number})}}),u.slice(0,6)},[a,r,te]),D=d.useCallback(async()=>{try{console.log("[BookTable] Loading availability data...");const l=await(await fetch(`${M}/availability`)).json();console.log("[BookTable] Availability loaded:",l),h(l||{});const S=await(await fetch(`${M}/bookings?start_date=${s}`)).json();b(Array.isArray(S)?S:[])}catch(u){console.error("[BookTable] Error loading data:",u)}},[s]);d.useEffect(()=>{D()},[D]);const G=(u,l)=>{if(!r)return;console.log("[BookTable] Toggle availability:",{player:r,date:u,slot:l});const g=m[r]||{},S=g[u]||[],B=S.includes(l)?S.filter(F=>F!==l):[...S,l],j={...g,[u]:B},x={...m,[r]:j};h(x),X(!0)},K=async()=>{if(!r||!z)return;L(!0),console.log("[BookTable] Saving availability...");const u=m[r]||{};try{const l=await fetch(`${M}/availability`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({[r]:u})});if(!l.ok){console.error("Failed to save availability:",await l.text()),alert("Failed to save availability. Please try again."),L(!1);return}console.log("[BookTable] Saved successfully, reloading data..."),await D(),X(!1),L(!1)}catch(l){console.error("Failed to save availability:",l),alert("Failed to save availability. Please try again."),L(!1)}},oe=async()=>{if(!(!v||!$||!r)){Q(!0);try{const u=await fetch(`${M}/bookings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({match_id:v.id,player1:r,player2:v.opponent,booking_date:s,start_time:$,group_name:v.group})});if(u.ok)await D(),c(!1),A(null),C(null);else{const l=await u.json();alert(l.error||"Failed to book")}}catch{alert("Failed to book")}Q(!1)}},f=async u=>{if(confirm("Cancel this booking?"))try{await fetch(`${M}/bookings/${u}`,{method:"DELETE"}),await D()}catch{alert("Failed to cancel")}},R=async()=>{if(!(!U||!W||!J)){Q(!0);try{const u=await fetch(`${M}/bookings/${U.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({booking_date:W,start_time:J})});if(u.ok)await D(),V(!1),q(null),se(""),_("");else{const l=await u.json();alert(l.error||"Failed to move booking")}}catch{alert("Failed to move booking")}Q(!1)}},H=u=>{var l,g;q(u),se(((l=u.booking_date)==null?void 0:l.split("T")[0])||""),_(((g=u.start_time)==null?void 0:g.substring(0,5))||""),V(!0)},ee=u=>{if(!u)return"";const[l,g]=u.split(":"),S=parseInt(l),B=S>=12?"PM":"AM";return`${S%12||12}:${g} ${B}`},le=d.useMemo(()=>{const u=[],l=new Date;l.setDate(l.getDate()-l.getDay());for(let g=0;g<14;g++){const S=new Date(l);S.setDate(l.getDate()+g),u.push(S.toISOString().split("T")[0])}return u},[]),de=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ce=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30"],he=(u,l)=>{var j,x;if(!r||!u)return[];const g=((j=m[r])==null?void 0:j[l])||[],S=((x=m[u])==null?void 0:x[l])||[],B=o.filter(F=>{var Y;return((Y=F.booking_date)==null?void 0:Y.split("T")[0])===l&&F.status!=="cancelled"}).map(F=>{var Y;return(Y=F.start_time)==null?void 0:Y.substring(0,5)});return g.filter(F=>S.includes(F)&&!B.includes(F))};return r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{name:r,size:"lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg",children:r}),e.jsx("div",{className:"text-sm text-gray-500",children:"My Schedule"})]})]}),e.jsx("button",{onClick:()=>n(""),className:"text-gray-500 hover:text-white text-sm",children:"Switch Player"})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"My Upcoming Matches"}),T.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming matches"}):e.jsx("div",{className:"space-y-3",children:T.map(u=>{const l=le.flatMap(g=>he(u.opponent,g).map(S=>({date:g,slot:S})));return e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:["Week ",u.weekNum]}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${u.group==="A"?"bg-emerald-900/50 text-green-600":"bg-amber-900/50 text-amber-600"}`,children:["Group ",u.group]})]})}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"font-medium",children:"vs"}),e.jsx(E,{name:u.opponent,size:"sm"}),e.jsx("span",{className:"font-semibold",children:u.opponent})]}),l.length>0?e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-green-600 mb-2",children:[l.length," mutual available slots this week:"]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.slice(0,6).map(({date:g,slot:S})=>e.jsxs("button",{onClick:()=>{A(u),p(g),C(S),c(!0)},className:"text-xs bg-emerald-900/50 text-green-600 px-2 py-1 rounded hover:bg-emerald-800",children:[de[new Date(g).getDay()]," ",ee(S)]},g+S)),l.length>6&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",l.length-6," more"]})]})]}):e.jsx("p",{className:"text-xs text-amber-600",children:"No mutual availability yet. Set your available times below!"})]},u.id)})})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Set My Availability (2 Weeks)"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Tap slots when you're free to play. Your opponents will see when you overlap!"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-1 text-left text-gray-500",children:"Time"}),le.map((u,l)=>{const g=new Date(u+"T12:00"),S=l>=7;return e.jsxs("th",{className:`p-1 text-center ${S?"bg-blue-50":""} ${l===7?"border-l-2 border-blue-300":""}`,children:[e.jsx("div",{className:"text-gray-500 text-xs",children:de[g.getDay()]}),e.jsx("div",{className:"font-semibold",children:g.getDate()}),l===0&&e.jsx("div",{className:"text-[10px] text-purple-600",children:"Week 1"}),l===7&&e.jsx("div",{className:"text-[10px] text-blue-600",children:"Week 2"})]},u)})]})}),e.jsx("tbody",{children:ce.map(u=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-1 text-gray-500 text-xs",children:ee(u)}),le.map((l,g)=>{var N,ne;const S=(ne=(N=m[r])==null?void 0:N[l])==null?void 0:ne.includes(u),B=o.find(ue=>{var we,Ne;return((we=ue.booking_date)==null?void 0:we.split("T")[0])===l&&((Ne=ue.start_time)==null?void 0:Ne.substring(0,5))===u&&ue.status!=="cancelled"}),j=!!B,x=B&&(B.player1===r||B.player2===r),F=B==null?void 0:B.group_name,Y=g>=7;return e.jsx("td",{className:`p-1 ${Y?"bg-blue-50/30":""} ${g===7?"border-l-2 border-blue-300":""}`,children:e.jsx("button",{onClick:()=>!j&&G(l,u),disabled:j&&!x,title:B?`${B.player1} vs ${B.player2}${F?` (Group ${F})`:""}`:"",className:`w-full h-8 rounded text-xs relative ${x?"bg-purple-600 text-white":j&&F==="A"?"bg-emerald-900/60 text-green-600 cursor-not-allowed border border-emerald-700":j&&F==="B"?"bg-amber-900/60 text-amber-600 cursor-not-allowed border border-amber-700":j?"bg-gray-200 text-gray-500 cursor-not-allowed":S?"bg-emerald-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:x?"My":j?F||"X":S?"✓":""})},l)})]},u))})]})}),z&&e.jsxs("div",{className:"mt-3 text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"⚠️"}),e.jsx("span",{children:'You have unsaved changes. Click "Save Availability" button below.'})]}),e.jsx("button",{onClick:K,disabled:!z||w,className:`mt-3 w-full py-3 rounded-lg font-bold text-lg transition-all ${z&&!w?"bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:w?"💾 Saving...":z?"💾 Save Availability":"✓ Saved"}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex gap-4 text-xs flex-wrap justify-center",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 bg-emerald-600 rounded"})," I'm available"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 bg-purple-600 rounded"})," My booking"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 bg-emerald-900/60 border border-emerald-700 rounded"})," Group A"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 bg-amber-900/60 border border-amber-700 rounded"})," Group B"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 bg-gray-200 rounded"})," Other"]})]})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"My Booked Matches"}),(()=>{const u=o.filter(l=>(l.player1===r||l.player2===r)&&l.status!=="cancelled");return u.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No booked matches yet"}):e.jsx("div",{className:"space-y-2",children:u.map(l=>{var g;return e.jsxs("div",{className:"flex items-center justify-between bg-gray-100 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-purple-600 font-mono font-semibold",children:[new Date(l.booking_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," ",ee((g=l.start_time)==null?void 0:g.substring(0,5))]}),e.jsxs("div",{className:"font-medium",children:["vs ",l.player1===r?l.player2:l.player1]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>H(l),className:"text-amber-600 hover:text-amber-300 text-sm",children:"Move"}),e.jsx("button",{onClick:()=>f(l.id),className:"text-red-500 hover:text-rose-300 text-sm",children:"Cancel"})]})]},l.id)})})})()]}),y&&v&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>c(!1),children:e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 max-w-md w-full animate-slideIn",onClick:u=>u.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Confirm Match Booking"}),e.jsxs("p",{className:"text-gray-500 mb-4",children:[new Date(s+"T12:00").toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})," at ",ee($)]}),e.jsxs("div",{className:"bg-gray-200 rounded-lg p-4 mb-4 flex items-center justify-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(E,{name:r}),e.jsx("div",{className:"mt-1 text-sm",children:r})]}),e.jsx("div",{className:"text-gray-500 text-lg",children:"vs"}),e.jsxs("div",{className:"text-center",children:[e.jsx(E,{name:v.opponent}),e.jsx("div",{className:"mt-1 text-sm",children:v.opponent})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:oe,disabled:O,className:"flex-1 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-200 rounded-lg font-semibold",children:O?"Booking...":"Confirm Booking"})]})]})}),re&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>V(!1),children:e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 max-w-md w-full animate-slideIn",onClick:u=>u.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Move Booking"}),e.jsxs("p",{className:"text-gray-500 mb-4",children:["Current: ",new Date(U.booking_date).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})," at ",ee((xe=U.start_time)==null?void 0:xe.substring(0,5))]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"New Date"}),e.jsx("input",{type:"date",value:W,onChange:u=>se(u.target.value),className:"w-full bg-gray-200 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"New Time"}),e.jsx("select",{value:J,onChange:u=>_(u.target.value),className:"w-full bg-gray-200 rounded-lg px-3 py-2",children:ce.map(u=>e.jsx("option",{value:u,children:ee(u)},u))})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>V(!1),className:"flex-1 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:R,disabled:O,className:"flex-1 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-gray-200 rounded-lg font-semibold",children:O?"Moving...":"Move Booking"})]})]})})]}):e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Who are you?"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Select your name to manage your schedule"}),e.jsxs("select",{onChange:u=>n(u.target.value),value:"",className:"bg-gray-100 rounded-lg px-4 py-3 text-lg w-full max-w-xs",children:[e.jsx("option",{value:"",children:"Select your name..."}),Z.map(u=>e.jsx("option",{value:u,children:u},u))]})]})}function ns(){const[t,a]=d.useState([]);return d.useEffect(()=>{const r=Array.from({length:50},(n,s)=>({id:s,left:Math.random()*100,delay:Math.random()*10,duration:8+Math.random()*7,size:.5+Math.random()*1,opacity:.4+Math.random()*.6}));a(r)},[]),e.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden z-50",children:t.map(r=>e.jsx("div",{className:"snowflake",style:{left:`${r.left}%`,animationDelay:`${r.delay}s`,animationDuration:`${r.duration}s`,fontSize:`${r.size}rem`,opacity:r.opacity},children:"❄"},r.id))})}function is({isAdmin:t,onRefresh:a}){const[r,n]=d.useState(null),[s,p]=d.useState([]),[m,h]=d.useState([]),[k,i]=d.useState(""),[o,b]=d.useState(""),[y,c]=d.useState(!0),[v,A]=d.useState(!1),[$,C]=d.useState(null),[P,I]=d.useState(!1),[O,Q]=d.useState(null),[re,V]=d.useState(""),[U,q]=d.useState(""),W=async()=>{try{const[w,L,Z]=await Promise.all([fetch(`${M}/registration/config`),fetch(`${M}/registration/list`),fetch(`${M}/league/matches`)]),T=await w.json(),D=await L.json(),G=await Z.json();n(T),p(D),h(G||[]),T.registration_close_date&&q(new Date(T.registration_close_date).toISOString().slice(0,16))}catch{console.error("Failed to load registration data")}c(!1)};d.useEffect(()=>{W()},[]);const se=async w=>{if(w.preventDefault(),!!k.trim()){A(!0),C(null);try{const L=await fetch(`${M}/registration/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerName:k.trim(),email:o.trim()||null})}),Z=await L.json();L.ok?(C({type:"success",text:Z.message}),i(""),b(""),W()):C({type:"error",text:Z.error})}catch{C({type:"error",text:"Failed to register. Please try again."})}A(!1)}},J=async(w,L,Z=null)=>{try{let T=null;Z!=null&&Z!==""&&(T=parseInt(Z)),console.log("Updating registration:",{id:w,status:L,finalSeed:T});const D=await fetch(`${M}/registration/${w}`,{method:"PUT",headers:{"Content-Type":"application/json","X-Admin-Password":localStorage.getItem("adminPassword")||""},body:JSON.stringify({registration_status:L,final_seed:T})});if(!D.ok){const K=await D.json();alert("Failed: "+(K.error||"Unknown error"));return}const G=await D.json();console.log("Update successful:",G),alert(T===null?"Player set to unseeded (Group B)":`Player seed set to #${T}`),Q(null),V(""),W()}catch(T){console.error("Failed to approve:",T),alert("Failed to update registration: "+T.message)}},_=async w=>{if(confirm("Remove this registration? (Player will remain in the database)"))try{const L=await fetch(`${M}/registration/${w}`,{method:"DELETE",headers:{"X-Admin-Password":localStorage.getItem("adminPassword")||""}});if(!L.ok){const Z=await L.json();alert("Failed: "+(Z.error||"Unknown error"));return}W()}catch(L){console.error("Failed to delete:",L),alert("Failed to remove registration")}},te=async()=>{try{await fetch(`${M}/registration/config`,{method:"PUT",headers:{"Content-Type":"application/json","X-Admin-Password":localStorage.getItem("adminPassword")||""},body:JSON.stringify({registration_open:r.registration_open,registration_close_date:U?new Date(U).toISOString():null})}),W()}catch{}},ae=async()=>{if(confirm(`Convert to Season format?

• Deletes current bracket tournament
• Creates 10-week season with Groups A & B
• 8 games per player
• Mid-season swap at Week 3
• Keeps all registered players

This will close registration. Continue?`))try{const w=await fetch(`${M}/registration/convert-to-season`,{method:"POST",headers:{"X-Admin-Password":localStorage.getItem("adminPassword")||""}}),L=await w.json();w.ok?(alert(`Season created!

Group A: ${L.season.groupA} players
Group B: ${L.season.groupB} players
Total Weeks: ${L.season.totalWeeks}

Go to Home/Schedule tab to view the season.`),window.location.href="/"):alert(L.error)}catch(w){console.error("Failed to convert:",w),alert("Failed to convert to season")}},z=async()=>{if(confirm("Generate bracket from approved registrations? This will close registration."))try{const w=await fetch(`${M}/registration/generate-bracket`,{method:"POST",headers:{"X-Admin-Password":localStorage.getItem("adminPassword")||""}}),L=await w.json();w.ok?(alert(`Bracket generated! ${L.numPlayers} players, ${L.numByes} byes, ${L.seededCount} seeded.`),W()):alert(L.error)}catch(w){console.error("Failed to generate bracket:",w),alert("Failed to generate bracket")}},X=r!=null&&r.registration_close_date?Math.ceil((new Date(r.registration_close_date)-new Date)/(1e3*60*60*24)):null;return y?e.jsx("div",{className:"text-center py-20",children:"Loading..."}):e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx(ns,{}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"winter-gradient rounded-2xl p-8 mb-6 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCI+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjEpIi8+PC9zdmc+')] opacity-30"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-6xl mb-4",children:"❄️ 🏓 ❄️"}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Mammotome Ping Pong League"}),e.jsx("h2",{className:"text-2xl text-fuchsia-200 mb-2",children:(r==null?void 0:r.season_name)||"Winter League 2026"}),e.jsx("p",{className:"text-fuchsia-100 text-lg",children:"Register now to compete!"}),r!=null&&r.registration_open?e.jsx("div",{className:"mt-4 inline-block bg-emerald-500/20 border border-emerald-400/50 rounded-full px-6 py-2",children:e.jsxs("span",{className:"text-emerald-300 font-semibold",children:["✓ Registration Open",X!==null&&X>0&&e.jsxs("span",{className:"text-emerald-200 ml-2",children:["(",X," days left)"]})]})}):e.jsx("div",{className:"mt-4 inline-block bg-rose-500/20 border border-rose-400/50 rounded-full px-6 py-2",children:e.jsx("span",{className:"text-rose-300 font-semibold",children:"Registration Closed"})}),(r==null?void 0:r.stats)&&e.jsxs("div",{className:"mt-4 flex justify-center gap-8 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:r.stats.approved}),e.jsx("div",{className:"text-fuchsia-200",children:"Confirmed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-300",children:r.stats.pending}),e.jsx("div",{className:"text-fuchsia-200",children:"Awaiting Admin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-fuchsia-300",children:r.stats.ranked}),e.jsx("div",{className:"text-fuchsia-200",children:"Returning Players"})]})]})]})]}),(r==null?void 0:r.registration_open)&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-fuchsia-400",children:"❄️"}),"Register to Play"]}),e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Your Name *"}),e.jsx("input",{type:"text",value:k,onChange:w=>i(w.target.value),placeholder:"Enter your name",className:"w-full bg-gray-100 border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-fuchsia-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Returning players: Use the same name from last season to keep your ranking"})]}),$&&e.jsx("div",{className:`p-4 rounded-lg ${$.type==="success"?"bg-emerald-900/50 text-emerald-300 border border-emerald-500/50":"bg-rose-900/50 text-rose-300 border border-rose-500/50"}`,children:$.text}),e.jsx("button",{type:"submit",disabled:v||!k.trim(),className:"w-full bg-gradient-to-r from-fuchsia-600 to-purple-600 hover:from-fuchsia-500 hover:to-purple-500 disabled:from-gray-400 disabled:to-gray-400 py-3 rounded-lg font-bold text-lg transition-all",children:v?"Registering...":"❄️ Register for Winter League"})]})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"📋"}),"League Format & Rules"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-purple-600 mb-2 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})}),"League Structure"]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1.5 ml-7",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-green-600 font-semibold",children:"Group A"})," - Seeded/Ranked players (competitive)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-amber-600 font-semibold",children:"Group B"})," - New/Unseeded players (developmental)"]}),e.jsx("li",{children:"10-week regular season with round-robin matches"}),e.jsx("li",{children:"Mid-season promotion/relegation between groups"}),e.jsx("li",{children:"Championship bracket with top 4 from each group"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-purple-600 mb-2 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-2.75 0"})}),"Match Format"]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1.5 ml-7",children:[e.jsx("li",{children:"Best of 3 games (first to win 2 games)"}),e.jsx("li",{children:"Games played to 11 points, win by 2"}),e.jsx("li",{children:"Serve switches every 2 points"}),e.jsx("li",{children:"Players schedule matches via table booking"}),e.jsx("li",{children:"Match must be completed within the week"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-purple-600 mb-2 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),"Scoring System"]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1.5 ml-7",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Win 2-0:"})," 3 points for winner"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Win 2-1:"})," 2 points for winner, 1 point for loser"]}),e.jsx("li",{children:"Standings by: Wins → Point Differential → Head-to-Head"}),e.jsx("li",{children:"Forfeit = 2-0 loss for forfeiting player"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-purple-600 mb-2 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})}),"Championship Playoffs"]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1.5 ml-7",children:[e.jsx("li",{children:"Top 4 from each group qualify for playoffs"}),e.jsx("li",{children:"5th/6th place play wildcard for final spots"}),e.jsx("li",{children:"8-player single elimination bracket"}),e.jsx("li",{children:"Seeding: A1, B1, A2, B2, A3, B3, A4/WC, B4/WC"}),e.jsx("li",{children:"Finals played on championship week"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h3",{className:"font-bold text-purple-700 mb-2",children:"📅 Key Dates"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-purple-600 font-semibold",children:"Registration"}),e.jsx("div",{className:"text-gray-600",children:"Open Now"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-purple-600 font-semibold",children:"Season Start"}),e.jsx("div",{className:"text-gray-600",children:"TBD"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-purple-600 font-semibold",children:"Mid-Season"}),e.jsx("div",{className:"text-gray-600",children:"Week 5"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-purple-600 font-semibold",children:"Championships"}),e.jsx("div",{className:"text-gray-600",children:"Week 11-12"})]})]})]})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Registered Players (",s.length,")"]}),s.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No registrations yet. Be the first!"}):e.jsx("div",{className:"grid gap-2",children:s.map((w,L)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${w.is_ranked?"bg-violet-900/30 border border-violet-500/30":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-gray-500 w-8",children:[L+1,"."]}),e.jsx("span",{className:"font-semibold",children:w.player_name}),w.registration_status==="pending"&&e.jsx("span",{className:"text-xs bg-amber-600/50 px-2 py-0.5 rounded text-amber-200",title:"League admin will confirm your seed placement",children:"Awaiting Admin Approval"}),w.registration_status==="approved"&&(w.final_seed===null||w.final_seed===void 0||w.final_seed==="")&&e.jsx("span",{className:"text-xs bg-gray-500/50 px-2 py-0.5 rounded text-gray-300",children:"Unseeded"})]}),w.final_seed!==null&&w.final_seed!==void 0&&w.final_seed!==""?e.jsxs("span",{className:"text-green-600 font-bold",children:["Seed #",w.final_seed]}):w.registration_status==="approved"?e.jsx("span",{className:"text-amber-600 font-semibold",children:"Group B"}):null]},w.player_name))})]}),t&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6",children:[e.jsxs("button",{onClick:()=>I(!P),className:"w-full flex items-center justify-between text-xl font-bold mb-4",children:[e.jsx("span",{children:"⚙️ Admin Controls"}),e.jsx("span",{className:"text-gray-500",children:P?"▼":"▶"})]}),P&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold mb-3",children:"Registration Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:r==null?void 0:r.registration_open,onChange:w=>n({...r,registration_open:w.target.checked}),className:"w-5 h-5"}),e.jsx("span",{children:"Registration Open"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Close Date"}),e.jsx("input",{type:"datetime-local",value:U,onChange:w=>q(w.target.value),className:"bg-gray-200 rounded px-3 py-2 w-full"})]}),e.jsx("button",{onClick:te,className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-semibold",children:"Save Settings"})]})]}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-bold mb-3",children:["Review Registrations (",s.length,")"]}),e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[s.map(w=>e.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 bg-gray-200/50 rounded-lg",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-semibold",children:w.player_name}),w.is_ranked&&e.jsxs("span",{className:"text-xs bg-purple-600/50 px-2 py-0.5 rounded text-violet-200",children:["Prev #",w.suggested_seed]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${w.registration_status==="approved"?"bg-emerald-600/50 text-emerald-200":"bg-amber-600/50 text-amber-200"}`,children:w.registration_status==="approved"?"Approved":"Pending"}),w.final_seed!==null&&w.final_seed!==void 0&&w.final_seed!==""?e.jsxs("span",{className:"text-xs bg-cyan-600/50 px-2 py-0.5 rounded text-cyan-200",children:["Seed #",w.final_seed]}):e.jsx("span",{className:"text-xs bg-amber-600/50 px-2 py-0.5 rounded text-amber-200",children:"Unseeded (Group B)"})]})}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:O===w.id?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"number",value:re,onChange:L=>V(L.target.value),placeholder:"Seed #",min:"1",className:"w-20 bg-gray-300 rounded px-2 py-1.5 text-sm"}),e.jsx("button",{onClick:()=>J(w.id,"approved",re),className:"text-xs bg-emerald-600 hover:bg-emerald-500 px-3 py-1.5 rounded font-semibold",children:"Save"}),e.jsx("button",{onClick:()=>J(w.id,"approved",null),className:"text-xs bg-gray-400 hover:bg-gray-500 px-3 py-1.5 rounded font-semibold",children:"Unseeded"}),e.jsx("button",{onClick:()=>{Q(null),V("")},className:"text-xs bg-gray-300 hover:bg-gray-400 px-2 py-1.5 rounded",children:"✕"})]}):e.jsxs(e.Fragment,{children:[w.registration_status==="pending"&&e.jsx("button",{onClick:()=>J(w.id,"approved",null),className:"text-xs bg-emerald-600 hover:bg-emerald-500 px-3 py-1.5 rounded font-semibold",children:"Approve"}),e.jsx("button",{onClick:()=>{Q(w.id),V(w.final_seed||w.suggested_seed||"")},className:"text-xs bg-fuchsia-600 hover:bg-fuchsia-500 px-3 py-1.5 rounded font-semibold",children:"Set Seed"}),e.jsx("button",{onClick:()=>_(w.id),className:"text-xs bg-rose-600 hover:bg-rose-500 px-3 py-1.5 rounded font-semibold",children:"Remove"})]})})]},w.id||w.player_name)),s.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No registrations yet"})]})]}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold mb-3",children:"Start Tournament"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Choose your tournament format. This will close registration."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:ae,className:"w-full bg-green-600 hover:bg-green-500 px-4 py-3 rounded-lg font-semibold text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"🏆"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:"Season Format (Recommended)"}),e.jsxs("div",{className:"text-xs text-white/80 mt-1",children:["• 10 weeks with Groups A & B",e.jsx("br",{}),"• 8 games per player",e.jsx("br",{}),"• Mid-season group swap (Week 3)",e.jsx("br",{}),"• Playoffs with top 4 from each group"]})]})]})}),e.jsx("button",{onClick:z,className:"w-full bg-amber-600 hover:bg-amber-500 px-4 py-3 rounded-lg font-semibold text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"🥊"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:"Bracket Tournament"}),e.jsxs("div",{className:"text-xs text-white/80 mt-1",children:["• Single-elimination",e.jsx("br",{}),"• Lose once = eliminated",e.jsx("br",{}),"• 1-5 games per player",e.jsx("br",{}),"• Faster format (4-5 weeks)"]})]})]})})]})]})]})]}),!(r!=null&&r.registration_open)&&m.length>0&&e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:e.jsxs("p",{className:"text-purple-700",children:["🏆 Bracket has been generated! Go to the ",e.jsx("strong",{children:"League"})," tab to view matches."]})})]})]})}function os({playerName:t}){const[a,r]=d.useState(null),[n,s]=d.useState(!0),[p,m]=d.useState(t),[h,k]=d.useState([]);return d.useEffect(()=>{fetch(`${M}/players`).then(i=>i.json()).then(i=>k(i||[]))},[]),d.useEffect(()=>{if(!p){s(!1);return}s(!0),fetch(`${M}/player/${encodeURIComponent(p)}/stats`).then(i=>i.json()).then(i=>{r(i),s(!1)}).catch(()=>s(!1))},[p]),p?n?e.jsx("div",{className:"text-center py-8",children:"Loading player stats..."}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-700 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.playerName}),a.currentSeason&&e.jsxs("p",{className:"text-purple-200",children:["Group ",a.currentSeason.group," | Rank #",a.currentSeason.rank]})]}),e.jsx("select",{className:"bg-white/20 text-white border border-white/30 rounded-lg px-3 py-2",value:p,onChange:i=>m(i.target.value),children:h.map(i=>e.jsx("option",{value:i.name,className:"text-gray-900",children:i.name},i.name))})]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.currentSeason&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:a.currentSeason.wins}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Season Wins"})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-500",children:a.currentSeason.losses}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Season Losses"})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[a.currentSeason.winRate,"%"]}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Win Rate"})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 text-center",children:[e.jsxs("div",{className:`text-3xl font-bold ${a.currentSeason.pointsFor-a.currentSeason.pointsAgainst>=0?"text-green-600":"text-red-500"}`,children:[a.currentSeason.pointsFor-a.currentSeason.pointsAgainst>=0?"+":"",a.currentSeason.pointsFor-a.currentSeason.pointsAgainst]}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Point Diff"})]})]})}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"All-Time Stats"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:a.allTime.seasonsPlayed}),e.jsx("div",{className:"text-xs text-gray-500",children:"Seasons"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.allTime.wins}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total Wins"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-500",children:a.allTime.losses}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total Losses"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:a.allTime.championships}),e.jsx("div",{className:"text-xs text-gray-500",children:"Championships"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-400",children:a.allTime.runnerUps}),e.jsx("div",{className:"text-xs text-gray-500",children:"Runner-Ups"})]})]})]}),Object.keys(a.headToHead).length>0&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"Head-to-Head Record"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-2",children:Object.entries(a.headToHead).sort((i,o)=>o[1].wins+o[1].losses-(i[1].wins+i[1].losses)).map(([i,o])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:i}),e.jsxs("span",{className:`font-bold ${o.wins>o.losses?"text-green-600":o.wins<o.losses?"text-red-500":"text-gray-500"}`,children:[o.wins,"-",o.losses]})]},i))})]}),a.matchHistory.length>0&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"Recent Matches"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:a.matchHistory.slice().reverse().map((i,o)=>e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${i.won?"bg-green-50 border-l-4 border-green-500":"bg-red-50 border-l-4 border-red-400"}`,children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm mr-2",children:typeof i.week=="number"?`Wk ${i.week}`:i.week}),e.jsxs("span",{className:"font-medium",children:["vs ",i.opponent]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-bold ${i.won?"text-green-600":"text-red-500"}`,children:i.score}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${i.won?"bg-green-200 text-green-800":"bg-red-200 text-red-800"}`,children:i.won?"W":"L"})]})]},o))})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:["Could not load stats for ",p]}):e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Player Profile"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Select a player to view their stats:"}),e.jsxs("select",{className:"w-full p-3 border rounded-lg",onChange:i=>m(i.target.value),value:"",children:[e.jsx("option",{value:"",children:"-- Select Player --"}),h.map(i=>e.jsx("option",{value:i.name,children:i.name},i.name))]})]})}function ds(){var b,y;const[t,a]=d.useState(null),[r,n]=d.useState(!0),[s,p]=d.useState(new Date().toISOString().split("T")[0]);d.useEffect(()=>{const c=new Date;c.setDate(c.getDate()-7);const v=new Date;v.setDate(v.getDate()+14),fetch(`${M}/table/calendar?start=${c.toISOString().split("T")[0]}&end=${v.toISOString().split("T")[0]}`).then(A=>A.json()).then(A=>{a(A),n(!1)}).catch(()=>n(!1))},[]);const[m,h]=d.useState(null);if(d.useEffect(()=>{s&&fetch(`${M}/table/availability/${s}`).then(c=>c.json()).then(h).catch(()=>{})},[s]),r)return e.jsx("div",{className:"text-center py-8",children:"Loading calendar..."});const k=[],i=new Date;i.setDate(i.getDate()-3);for(let c=0;c<14;c++){const v=new Date(i);v.setDate(v.getDate()+c),k.push(v.toISOString().split("T")[0])}const o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Table Availability Calendar"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4",children:k.map(c=>{var C;const v=new Date(c+"T12:00:00"),A=c===new Date().toISOString().split("T")[0],$=((C=t==null?void 0:t.bookings)==null?void 0:C[c])||[];return e.jsxs("button",{onClick:()=>p(c),className:`flex-shrink-0 p-3 rounded-lg text-center min-w-16 transition-colors ${s===c?"bg-purple-600 text-white":A?"bg-purple-100 text-purple-700 border-2 border-purple-300":"bg-gray-100 hover:bg-gray-200"}`,children:[e.jsx("div",{className:"text-xs font-medium",children:o[v.getDay()]}),e.jsx("div",{className:"text-lg font-bold",children:v.getDate()}),$.length>0&&e.jsxs("div",{className:`text-xs ${s===c?"text-purple-200":"text-purple-600"}`,children:[$.length," game",$.length!==1?"s":""]})]},c)})}),m&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:new Date(s+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-10 gap-2",children:m.slots.map(c=>e.jsxs("div",{className:`p-2 rounded-lg text-center text-sm ${c.available?"bg-green-100 text-green-700 border border-green-300":"bg-red-100 text-red-700 border border-red-300"}`,title:c.booking?`${c.booking.player1} vs ${c.booking.player2}`:"Available",children:[e.jsx("div",{className:"font-medium",children:c.time}),e.jsx("div",{className:"text-xs",children:c.available?"Free":"Booked"})]},c.time))}),e.jsxs("div",{className:"mt-3 flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-green-500"})," Available: ",m.totalAvailable]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-red-500"})," Booked: ",m.totalBooked]})]})]})]}),((y=(b=t==null?void 0:t.bookings)==null?void 0:b[s])==null?void 0:y.length)>0&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h3",{className:"font-bold mb-3",children:"Scheduled Games"}),e.jsx("div",{className:"space-y-2",children:t.bookings[s].map(c=>{var v,A;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:c.player1}),e.jsx("span",{className:"text-gray-500 mx-2",children:"vs"}),e.jsx("span",{className:"font-medium",children:c.player2}),c.group&&e.jsxs("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:["Group ",c.group]})]}),e.jsxs("div",{className:"text-gray-600",children:[(v=c.startTime)==null?void 0:v.slice(0,5)," - ",(A=c.endTime)==null?void 0:A.slice(0,5)]})]},c.id)})})]})]})}function cs(){const[t,a]=d.useState([]),[r,n]=d.useState(!0),[s,p]=d.useState(null),[m,h]=d.useState(null);d.useEffect(()=>{fetch(`${M}/seasons/history`).then(i=>i.json()).then(i=>{a(i||[]),n(!1)}).catch(()=>n(!1))},[]);const k=i=>{p(i),fetch(`${M}/seasons/history/${i}`).then(o=>o.json()).then(h).catch(()=>{})};return r?e.jsx("div",{className:"text-center py-8",children:"Loading archives..."}):t.length===0?e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Season Archive"}),e.jsx("p",{className:"text-gray-500",children:"No archived seasons yet. Seasons are archived when completed."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Season Archive"}),e.jsx("div",{className:"space-y-3",children:t.map(i=>e.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${s===i.season_number?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300 hover:bg-gray-50"}`,onClick:()=>k(i.season_number),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Season #",i.season_number," | ",i.total_matches," matches"]})]}),e.jsxs("div",{className:"text-right",children:[i.champion&&e.jsxs("div",{className:"text-yellow-600 font-bold flex items-center gap-1",children:[e.jsx("span",{children:"Champion:"})," ",i.champion]}),i.runner_up&&e.jsxs("div",{className:"text-gray-500 text-sm",children:["Runner-up: ",i.runner_up]})]})]})},i.season_number))})]}),m&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-bold text-lg mb-4",children:[m.name," - Final Standings"]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:["A","B"].map(i=>{var y,c;const o=(c=(y=m.data)==null?void 0:y.standings)==null?void 0:c[i];if(!o)return null;const b=Object.entries(o).map(([v,A])=>({name:v,...A})).sort((v,A)=>A.wins!==v.wins?A.wins-v.wins:A.pointsFor-A.pointsAgainst-(v.pointsFor-v.pointsAgainst));return e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 text-purple-600",children:["Group ",i]}),e.jsx("div",{className:"space-y-1",children:b.map((v,A)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{children:[e.jsxs("span",{className:"text-gray-400 mr-2",children:[A+1,"."]}),v.name]}),e.jsxs("span",{className:"text-sm",children:[v.wins,"W-",v.losses,"L"]})]},v.name))})]},i)})})]})]})}function xs({players:t,onCreateSeason:a,isAdmin:r,onLogin:n,onAddPlayer:s,onCreateBracket:p,season:m,onArchiveSeason:h,onClearSeason:k}){const[i,o]=d.useState([]),[b,y]=d.useState([]),[c,v]=d.useState(""),[A,$]=d.useState(""),[C,P]=d.useState(""),[I,O]=d.useState(""),[Q,re]=d.useState(""),[V,U]=d.useState([]),[q,W]=d.useState(!1),[se,J]=d.useState(!1),[_,te]=d.useState(null),[ae,z]=d.useState(""),[X,w]=d.useState(null),L=(f,R)=>{R==="A"?(y(b.filter(H=>H.name!==f.name)),i.find(H=>H.name===f.name)||o([...i,f])):(o(i.filter(H=>H.name!==f.name)),b.find(H=>H.name===f.name)||y([...b,f]))},Z=()=>{if(!C.trim())return;const f={name:C.trim(),seed:null};y([...b,f]),P("")},T=async()=>{if(C.trim()){W(!0);try{await s(C.trim(),I?parseInt(I):null),P(""),O("")}finally{W(!1)}}},D=f=>{V.find(R=>R.name===f.name)?U(V.filter(R=>R.name!==f.name)):U([...V,f])},G=async()=>{if(!(V.length<2)){J(!0);try{await p(V),U([])}finally{J(!1)}}},K=async(f,R)=>{try{(await fetch(`${M}/players/${encodeURIComponent(f)}/seed`,{method:"PUT",headers:{"Content-Type":"application/json","X-Admin-Password":localStorage.getItem("adminPassword")||""},body:JSON.stringify({seed:R===""?null:parseInt(R)})})).ok&&(te(null),z(""),window.location.reload())}catch(H){console.error("Failed to update seed:",H)}},oe=async f=>{if(confirm(`Are you sure you want to delete ${f}? This cannot be undone.`))try{(await fetch(`${M}/players/${encodeURIComponent(f)}`,{method:"DELETE",headers:{"X-Admin-Password":localStorage.getItem("adminPassword")||""}})).ok&&(w(null),window.location.reload())}catch(R){console.error("Failed to delete player:",R)}};return r?e.jsxs("div",{className:"space-y-6",children:[m&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Season Management"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[m.status==="complete"&&e.jsxs("button",{onClick:h,className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})}),"Archive Season & Start New"]}),e.jsxs("button",{onClick:k,className:"bg-rose-600 hover:bg-rose-500 px-4 py-2 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Season (No Archive)"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:m.status==="complete"?"Season is complete! Archive it to save to history before creating a new season.":`Current season status: ${m.status}. Complete the season before archiving.`})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Manage Players (",t.length,")"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Edit seed rankings or delete players from the database."}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-3 py-2",children:"Player Name"}),e.jsx("th",{className:"text-center px-3 py-2 w-24",children:"Seed"}),e.jsx("th",{className:"text-right px-3 py-2 w-32",children:"Actions"})]})}),e.jsx("tbody",{children:t.map((f,R)=>e.jsxs("tr",{className:R%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:f.name}),e.jsx("td",{className:"px-3 py-2 text-center",children:_===f.name?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"number",value:ae,onChange:H=>z(H.target.value),placeholder:"Seed",className:"w-16 px-2 py-1 bg-gray-100 rounded text-center text-sm",min:"1"}),e.jsx("button",{onClick:()=>K(f.name,ae),className:"text-green-600 hover:text-green-500 text-xs",children:"✓"}),e.jsx("button",{onClick:()=>K(f.name,""),className:"text-amber-600 hover:text-amber-500 text-xs",children:"⊘"}),e.jsx("button",{onClick:()=>{te(null),z("")},className:"text-gray-500 hover:text-gray-400 text-xs",children:"✕"})]}):e.jsx("span",{className:f.seed?"text-purple-600 font-semibold":"text-gray-400",children:f.seed?`#${f.seed}`:"—"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{te(f.name),z(f.seed||"")},className:"text-purple-600 hover:text-purple-500 text-xs px-2 py-1 rounded bg-purple-100 hover:bg-purple-200",children:"Edit Seed"}),e.jsx("button",{onClick:()=>oe(f.name),className:"text-rose-600 hover:text-rose-500 text-xs px-2 py-1 rounded bg-rose-100 hover:bg-rose-200",children:"Delete"})]})})]},f.name))})]})})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Player to Database"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("input",{type:"text",value:C,onChange:f=>P(f.target.value),placeholder:"Player name",className:"flex-1 min-w-[200px] bg-gray-100 rounded-lg px-4 py-2"}),e.jsx("input",{type:"number",value:I,onChange:f=>O(f.target.value),placeholder:"Seed (optional)",className:"w-32 bg-gray-100 rounded-lg px-4 py-2"}),e.jsx("button",{onClick:T,disabled:!C.trim()||q,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-200 px-6 py-2 rounded-lg font-semibold",children:q?"Adding...":"Add Player"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Players added here are saved to the database permanently."})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Send Push Notification"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Send custom notifications to players."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Recipients"}),e.jsxs("select",{id:"notif-recipient",className:"w-full bg-gray-100 rounded-lg px-4 py-2 text-sm",defaultValue:"all",children:[e.jsx("option",{value:"all",children:"All Players"}),e.jsx("option",{value:"groupA",children:"Group A Only"}),e.jsx("option",{value:"groupB",children:"Group B Only"}),t.map(f=>e.jsx("option",{value:f.name,children:f.name},f.name))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),e.jsx("input",{type:"text",id:"notif-title",placeholder:"e.g., Important Update",className:"w-full bg-gray-100 rounded-lg px-4 py-2 text-sm",maxLength:"50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Message"}),e.jsx("textarea",{id:"notif-message",placeholder:"e.g., Tournament schedule has been updated...",className:"w-full bg-gray-100 rounded-lg px-4 py-2 text-sm resize-none",rows:"3",maxLength:"200"})]}),e.jsxs("button",{onClick:async()=>{const f=document.getElementById("notif-recipient").value,R=document.getElementById("notif-title").value.trim(),H=document.getElementById("notif-message").value.trim();if(!R||!H){alert("Please fill in both title and message");return}if(confirm(`Send notification to ${f==="all"?"all players":f}?`))try{const ee=await fetch(`${M}/notifications/send-manual`,{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Password":localStorage.getItem("adminPassword")||""},body:JSON.stringify({recipient:f,title:R,message:H})}),le=await ee.json();ee.ok?(alert(`✓ Notification sent successfully to ${le.recipientCount} player(s)`),document.getElementById("notif-title").value="",document.getElementById("notif-message").value="",document.getElementById("notif-recipient").value="all"):alert(`Failed: ${le.error}`)}catch(ee){alert("Failed to send notification: "+ee.message)}},className:"w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-semibold flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})}),"Send Notification"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Notifications will be sent to all subscribed players in the selected group."})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create Double Elimination Bracket"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select players for the bracket tournament:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.map(f=>e.jsxs("button",{onClick:()=>D(f),className:`px-3 py-1 rounded-full text-sm transition-colors ${V.find(R=>R.name===f.name)?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[f.name," ",f.seed?`(#${f.seed})`:""]},f.name))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[V.length," players selected"]}),e.jsx("button",{onClick:G,disabled:V.length<2||se,className:"bg-amber-600 hover:bg-amber-500 disabled:bg-gray-200 disabled:text-gray-500 px-6 py-2 rounded-lg font-semibold",children:se?"Creating...":"Create Bracket"})]})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Season"}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:C,onChange:f=>P(f.target.value),placeholder:"Add player to groups",className:"flex-1 bg-gray-100 rounded-lg px-4 py-2"}),e.jsx("button",{onClick:Z,className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg",children:e.jsx(ie.Plus,{})})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-2",children:"Available Players"}),e.jsx("div",{className:"bg-gray-100 rounded-lg p-2 min-h-[200px] max-h-[300px] overflow-y-auto space-y-1",children:t.filter(f=>!i.find(R=>R.name===f.name)&&!b.find(R=>R.name===f.name)).map(f=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-200 rounded px-2 py-1 text-sm",children:[e.jsxs("span",{children:[f.name," ",f.seed?`(#${f.seed})`:""]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>L(f,"A"),className:"text-green-600 hover:text-emerald-300 text-xs",children:"→A"}),e.jsx("button",{onClick:()=>L(f,"B"),className:"text-amber-600 hover:text-amber-300 text-xs",children:"→B"})]})]},f.name))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-green-600 mb-2",children:["Group A: Seeded (",i.length,")"]}),e.jsx("div",{className:"bg-emerald-900/20 border border-emerald-800 rounded-lg p-2 min-h-[200px] max-h-[300px] overflow-y-auto space-y-1",children:i.map(f=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-200 rounded px-2 py-1 text-sm",children:[e.jsx("span",{children:f.name}),e.jsx("button",{onClick:()=>o(i.filter(R=>R.name!==f.name)),className:"text-red-500 text-xs",children:"×"})]},f.name))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-amber-600 mb-2",children:["Group B: Unseeded (",b.length,")"]}),e.jsx("div",{className:"bg-amber-900/20 border border-amber-800 rounded-lg p-2 min-h-[200px] max-h-[300px] overflow-y-auto space-y-1",children:b.map(f=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-200 rounded px-2 py-1 text-sm",children:[e.jsx("span",{children:f.name}),e.jsx("button",{onClick:()=>y(b.filter(R=>R.name!==f.name)),className:"text-red-500 text-xs",children:"×"})]},f.name))})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Games Per Player (Optional)"}),e.jsx("p",{className:"text-xs text-blue-700 mb-3",children:"Leave blank for full round-robin. Set a number to limit games (useful for large groups)."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Group A: Seeded",e.jsxs("span",{className:"text-gray-400 ml-1",children:["(Full: ",i.length>0?i.length-1:0," games)"]})]}),e.jsx("input",{type:"number",min:"1",max:i.length>0?i.length-1:100,value:c,onChange:f=>v(f.target.value),placeholder:`Default: ${i.length>0?i.length-1:"auto"}`,className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Group B: Unseeded",e.jsxs("span",{className:"text-gray-400 ml-1",children:["(Full: ",b.length>0?b.length-1:0," games)"]})]}),e.jsx("input",{type:"number",min:"1",max:b.length>0?b.length-1:100,value:A,onChange:f=>$(f.target.value),placeholder:`Default: ${b.length>0?b.length-1:"auto"}`,className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm"})]})]}),c&&i.length>0&&parseInt(c)<i.length-1&&e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"⚠️ Group A: Partial schedule - not all players will face each other"}),A&&b.length>0&&parseInt(A)<b.length-1&&e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"⚠️ Group B: Partial schedule - not all players will face each other"})]}),e.jsx("button",{onClick:()=>a(i,b),disabled:i.length<2||b.length<2,className:"w-full bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-200 disabled:text-gray-500 py-3 rounded-lg font-semibold",children:"Create Season (10 weeks)"})]})]}):e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 max-w-md mx-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Admin Login"}),e.jsx("input",{type:"password",value:Q,onChange:f=>re(f.target.value),placeholder:"Password",className:"w-full bg-gray-100 rounded-lg px-4 py-2 mb-4"}),e.jsx("button",{onClick:()=>n(Q),className:"w-full bg-purple-600 hover:bg-purple-700 py-2 rounded-lg font-semibold",children:"Login"})]})}const fe=async()=>{if(!("serviceWorker"in navigator))return console.log("Service Worker not supported"),null;try{const t=await navigator.serviceWorker.register("/service-worker.js");return console.log("Service Worker registered:",t.scope),t}catch(t){return console.error("Service Worker registration failed:",t),null}},je=async t=>{try{const a=await navigator.serviceWorker.ready,r=await fetch(`${M}/push/vapid-public-key`),{publicKey:n}=await r.json(),s=m=>{const h="=".repeat((4-m.length%4)%4),k=(m+h).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(k),o=new Uint8Array(i.length);for(let b=0;b<i.length;++b)o[b]=i.charCodeAt(b);return o},p=await a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:s(n)});return await fetch(`${M}/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:p.toJSON(),playerName:t})}),console.log("Push subscription successful"),p}catch(a){return console.error("Push subscription failed:",a),null}},Te=async(t=null)=>{if(!("Notification"in window))return{supported:!1,permission:null};if(Notification.permission==="granted")return await fe()&&await je(t),{supported:!0,permission:"granted"};if(Notification.permission!=="denied"){const a=await Notification.requestPermission();return a==="granted"&&await fe()&&await je(t),{supported:!0,permission:a}}return{supported:!0,permission:"denied"}},ye=(t,a,r="🏓")=>{Notification.permission==="granted"&&new Notification(t,{body:a,icon:"/favicon.ico",badge:"/favicon.ico",tag:"pingpong-notification",requireInteraction:!1})};"serviceWorker"in navigator&&fe();function ms({currentPlayer:t}){const[a,r]=d.useState([]),[n,s]=d.useState(0),[p,m]=d.useState(!1),[h,k]=d.useState(!1),[i,o]=d.useState(null);d.useEffect(()=>{"Notification"in window&&Notification.permission==="granted"&&k(!0)},[]),d.useEffect(()=>{if(!t)return;const c=async()=>{try{const $=await(await fetch(`${M}/notifications/${encodeURIComponent(t)}`)).json(),C=$.notifications||[];if(r(C),s($.unreadCount||0),h&&C.length>0){const P=C.find(I=>!I.is_read);P&&P.id!==i&&(o(P.id),ye(P.title,P.message))}}catch{}};c();const v=setInterval(c,3e4);return()=>clearInterval(v)},[t,h,i]);const b=async()=>{t&&(await fetch(`${M}/notifications/${encodeURIComponent(t)}/read-all`,{method:"PUT"}),r(a.map(c=>({...c,is_read:!0}))),s(0))},y=()=>{if(!t){alert(`Please select your player name first.

Go to "My Games" tab and select your name to enable notifications.`);return}m(!p)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:y,className:`relative p-2 rounded-lg transition-colors ${t?"hover:bg-gray-200 text-gray-900":"text-gray-400 cursor-pointer hover:bg-gray-100"}`,title:t?"Notifications":"Select player name first (My Games tab)",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})}),t&&n>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-rose-500 rounded-full text-xs flex items-center justify-center font-bold text-white",children:n>9?"9+":n})]}),p&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-gray-100 rounded-xl shadow-xl z-50 border border-gray-300",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-300",children:[e.jsx("span",{className:"font-semibold",children:"Notifications"}),n>0&&e.jsx("button",{onClick:b,className:"text-xs text-purple-600 hover:text-violet-300",children:"Mark all read"})]}),"Notification"in window&&e.jsx("div",{className:"p-3 border-b border-gray-300 bg-gray-200/30",children:Notification.permission==="denied"?e.jsxs("div",{className:"flex items-center gap-2 text-xs text-amber-600",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),e.jsx("span",{children:"Browser notifications blocked. Check browser settings."})]}):h?e.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),e.jsx("span",{children:"Push notifications enabled"})]}):e.jsxs("button",{onClick:async()=>{(await Te(t)).permission==="granted"&&(k(!0),ye("Notifications Enabled","You will now receive match updates!"))},className:"flex items-center gap-2 text-xs text-purple-600 hover:text-violet-300 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})}),e.jsx("span",{children:"Enable push notifications"})]})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:a.length===0?e.jsx("p",{className:"p-4 text-center text-gray-500 text-sm",children:"No notifications"}):a.slice(0,10).map(c=>e.jsx("div",{className:`p-3 border-b border-gray-300 ${c.is_read?"":"bg-gray-200/50"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[!c.is_read&&e.jsx("span",{className:"w-2 h-2 bg-violet-500 rounded-full mt-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:c.title}),e.jsx("p",{className:"text-xs text-gray-500",children:c.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(c.created_at).toLocaleString()})]})]})},c.id))})]})]})}function ps({players:t,season:a,currentPlayer:r,onSelectPlayer:n}){const[s,p]=d.useState(!1),[,m]=d.useState(0),[h,k]=d.useState([]);d.useEffect(()=>{fetch(`${M}/league/matches`).then(o=>o.json()).then(o=>k(o||[])).catch(()=>k([]))},[]);const i=d.useMemo(()=>{var Q,re,V,U,q,W,se,J,_,te,ae,z,X,w,L,Z;if(!r||!a&&h.length===0)return null;const o=h.filter(T=>T.player1===r||T.player2===r);if(!a&&o.length>0){const T=o.filter(G=>G.completed&&G.winner===r).length,D=o.filter(G=>G.completed&&G.winner&&G.winner!==r).length;return{leagueOnly:!0,stats:{wins:T,losses:D,pointsFor:0,pointsAgainst:0},matches:[],leagueMatches:o}}const b=(re=(Q=a==null?void 0:a.standings)==null?void 0:Q.A)==null?void 0:re[r],y=(U=(V=a==null?void 0:a.standings)==null?void 0:V.B)==null?void 0:U[r],c=b?"A":y?"B":null,v=b||y,A=[];a&&c&&(((q=a.schedule)==null?void 0:q[c])||[]).forEach((D,G)=>{D.forEach(K=>{(K.player1===r||K.player2===r)&&A.push({...K,week:G+1})})});let $=null,C=null;if(a&&c&&v){const T=Object.entries(a.standings[c]||{}).map(([D,G])=>({name:D,...G})).sort((D,G)=>{if(G.wins!==D.wins)return G.wins-D.wins;const K=D.pointsFor-D.pointsAgainst;return G.pointsFor-G.pointsAgainst-K});$=T.findIndex(D=>D.name===r)+1,C=T.length}const P=(se=(W=a==null?void 0:a.wildcard)==null?void 0:W.matches)==null?void 0:se.find(T=>T.player1===r||T.player2===r),I=(J=a==null?void 0:a.playoffs)==null?void 0:J[c],O=((_=I==null?void 0:I.semifinals)==null?void 0:_.some(T=>T.player1===r||T.player2===r))||((te=I==null?void 0:I.final)==null?void 0:te.player1)===r||((ae=I==null?void 0:I.final)==null?void 0:ae.player2)===r;return{group:c,rank:$,totalPlayers:C,stats:v||{wins:0,losses:0,pointsFor:0,pointsAgainst:0},matches:A,leagueMatches:o,wildcardMatch:P,inPlayoffs:O,isChampion:((X=(z=a==null?void 0:a.playoffs)==null?void 0:z[c])==null?void 0:X.champion)===r,isFinalist:((w=a==null?void 0:a.superBowl)==null?void 0:w.player1)===r||((L=a==null?void 0:a.superBowl)==null?void 0:L.player2)===r,isOverallChamp:((Z=a==null?void 0:a.superBowl)==null?void 0:Z.winner)===r}},[r,a,h]);return t!=null&&t.length?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Select Your Name"}),e.jsxs("select",{value:r,onChange:o=>n(o.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-lg p-3 text-lg",children:[e.jsx("option",{value:"",children:"-- Select Player --"}),t.map(o=>e.jsx("option",{value:o.name,children:o.name},o.name))]})]}),r&&i&&e.jsxs(e.Fragment,{children:[!i.leagueOnly&&e.jsxs("div",{className:`bg-gradient-to-r ${i.group==="A"?"from-green-100 to-white":"from-amber-100 to-white"} rounded-xl p-6 border ${i.group==="A"?"border-emerald-700":"border-amber-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(E,{name:r,size:"lg",onClick:()=>p(!0)}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-purple-600 rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-3 h-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:r}),e.jsxs("p",{className:`text-sm ${i.group==="A"?"text-green-600":"text-amber-600"}`,children:["Group ",i.group," • Rank #",i.rank," of ",i.totalPlayers]}),e.jsx("button",{onClick:()=>p(!0),className:"text-xs text-gray-500 hover:text-white mt-1",children:"Change avatar"})]}),i.isOverallChamp&&e.jsx("span",{className:"text-4xl",children:"🏆"}),i.isChampion&&!i.isOverallChamp&&e.jsx("span",{className:"text-3xl",children:"👑"})]}),s&&e.jsx(Me,{playerName:r,onClose:()=>p(!1),onSelect:()=>m(o=>o+1)}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"bg-gray-100/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.stats.wins}),e.jsx("div",{className:"text-xs text-gray-500",children:"Wins"})]}),e.jsxs("div",{className:"bg-gray-100/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-red-500",children:i.stats.losses}),e.jsx("div",{className:"text-xs text-gray-500",children:"Losses"})]}),e.jsxs("div",{className:"bg-gray-100/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold",children:i.stats.pointsFor}),e.jsx("div",{className:"text-xs text-gray-500",children:"Games Won"})]}),e.jsxs("div",{className:"bg-gray-100/50 rounded-lg p-3",children:[e.jsxs("div",{className:`text-2xl font-bold ${i.stats.pointsFor-i.stats.pointsAgainst>=0?"text-green-600":"text-red-500"}`,children:[i.stats.pointsFor-i.stats.pointsAgainst>=0?"+":"",i.stats.pointsFor-i.stats.pointsAgainst]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Diff"})]})]})]}),!i.leagueOnly&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.rank<=4&&e.jsx("span",{className:"bg-emerald-900/50 text-green-600 px-3 py-1 rounded-full text-sm",children:"✓ Playoff Qualified"}),i.rank===5||i.rank===6?e.jsx("span",{className:"bg-violet-900/50 text-purple-600 px-3 py-1 rounded-full text-sm",children:"⚡ Wildcard Eligible"}):null,i.wildcardMatch&&e.jsxs("span",{className:"bg-amber-900/50 text-amber-600 px-3 py-1 rounded-full text-sm",children:["🎯 Wildcard: vs ",i.wildcardMatch.player1===r?i.wildcardMatch.player2:i.wildcardMatch.player1]}),i.inPlayoffs&&e.jsx("span",{className:"bg-cyan-900/50 text-cyan-400 px-3 py-1 rounded-full text-sm",children:"🏆 In Playoffs"})]}),i.leagueOnly&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-white rounded-xl p-6 border border-purple-700",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"relative group",children:e.jsx(E,{name:r,size:"lg",onClick:()=>p(!0)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:r}),e.jsx("p",{className:"text-sm text-purple-600",children:"League Bracket Player"})]})]}),s&&e.jsx(Me,{playerName:r,onClose:()=>p(!1),onSelect:()=>m(o=>o+1)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-gray-100/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.stats.wins}),e.jsx("div",{className:"text-xs text-gray-500",children:"Wins"})]}),e.jsxs("div",{className:"bg-gray-100/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-red-500",children:i.stats.losses}),e.jsx("div",{className:"text-xs text-gray-500",children:"Losses"})]})]})]}),!i.leagueOnly&&i.matches.length>0&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Your Season Matches"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:i.matches.map((o,b)=>{const y=o.player1===r?o.player2:o.player1,c=o.winner===r;return o.loser,e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${o.completed?c?"bg-emerald-900/20 border border-emerald-800":"bg-rose-900/20 border border-rose-800":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs text-gray-500 w-12",children:["Wk ",o.week]}),e.jsx(E,{name:y,size:"sm"}),e.jsx("span",{className:"font-medium",children:y})]}),e.jsx("div",{children:o.completed?e.jsxs("div",{className:`flex items-center gap-2 ${c?"text-green-600":"text-red-500"}`,children:[e.jsx("span",{className:"font-bold",children:c?"W":"L"}),e.jsxs("span",{className:"text-sm",children:[o.score1,"-",o.score2]})]}):e.jsx("span",{className:"text-gray-500 text-sm",children:"Upcoming"})})]},b)})})]}),i.leagueMatches&&i.leagueMatches.length>0&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"🏆"}),"Your Bracket Matches"]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:i.leagueMatches.map(o=>{const b=o.player1===r?o.player2:o.player1,y=o.player1===r?o.seed2:o.seed1,c=o.winner===r,v=o.is_bye;return e.jsxs("div",{className:`p-3 rounded-lg border ${o.completed?c?"bg-green-50 border-green-300":"bg-red-50 border-red-300":"bg-purple-50 border-purple-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-600",children:["Round ",o.round," • Match ",o.match_number]}),v&&e.jsx("span",{className:"text-xs bg-amber-200 text-amber-800 px-2 py-1 rounded font-semibold",children:"BYE"}),o.completed&&e.jsx("span",{className:`text-xs px-2 py-1 rounded font-semibold ${c?"bg-green-200 text-green-800":"bg-red-200 text-red-800"}`,children:c?"WON":"LOST"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[!v&&e.jsx(E,{name:b,size:"sm"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:v?"BYE - Automatic Advance":b}),y&&!v&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Seed #",y]})]})]}),o.score&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Score: ",o.score]}),!o.completed&&!v&&b!=="TBD"&&e.jsx("div",{className:"mt-2 text-xs text-purple-600 font-semibold",children:"Match pending - check League tab"}),b==="TBD"&&e.jsx("div",{className:"mt-2 text-xs text-gray-500 italic",children:"Waiting for previous round to complete"})]},o.id)})})]})]}),r&&!i&&e.jsx("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 text-center",children:e.jsxs("p",{className:"text-gray-500",children:['Player "',r,'" not found in current season.']})})]}):e.jsx("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No players registered yet."})})}function hs({season:t}){const[a,r]=d.useState("all"),n=d.useMemo(()=>{var k,i;if(!(t!=null&&t.schedule))return[];const h=[];return["A","B"].forEach(o=>{var b;(b=t.schedule[o])==null||b.forEach((y,c)=>{y.forEach(v=>{v.completed&&v.winner&&h.push({type:"match",group:o,week:c+1,winner:v.winner,loser:v.loser,score1:v.score1,score2:v.score2,matchId:v.id,timestamp:Date.now()-(10-c)*864e5})})})}),(k=t.wildcard)!=null&&k.matches&&t.wildcard.matches.forEach(o=>{o.completed&&o.winner&&h.push({type:"wildcard",group:"Wildcard",week:"Wildcard",winner:o.winner,loser:o.loser,score1:o.score1,score2:o.score2,description:o.description,winnerGroup:o.winner===o.player1?o.player1Group:o.player2Group,timestamp:Date.now()-1e5})}),t.playoffs&&["A","B"].forEach(o=>{var b,y;t.playoffs[o]&&((b=t.playoffs[o].semifinals)==null||b.forEach((c,v)=>{c.completed&&c.winner&&h.push({type:"playoff",group:o,round:"Semifinal",winner:c.winner,loser:c.loser,score1:c.score1,score2:c.score2,timestamp:Date.now()-5e4+v*1e3})}),(y=t.playoffs[o].final)!=null&&y.completed&&h.push({type:"champion",group:o,round:"Final",winner:t.playoffs[o].champion,loser:t.playoffs[o].final.loser,score1:t.playoffs[o].final.score1,score2:t.playoffs[o].final.score2,timestamp:Date.now()-1e4}))}),(i=t.superBowl)!=null&&i.completed&&h.push({type:"superbowl",winner:t.champion,loser:t.superBowl.loser,score1:t.superBowl.score1,score2:t.superBowl.score2,timestamp:Date.now()}),h.sort((o,b)=>typeof o.week=="number"&&typeof b.week=="number"?b.week-o.week:b.timestamp-o.timestamp)},[t]),s=a==="all"?n:n.filter(h=>h.group===a);if(!t)return e.jsx("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No season data available."})});const p=h=>{switch(h){case"wildcard":return"⚡";case"playoff":return"🏆";case"champion":return"👑";case"superbowl":return"🎉";default:return"🏓"}},m=h=>h==="A"?"border-emerald-500 bg-emerald-900/20":h==="B"?"border-amber-500 bg-amber-900/20":"border-violet-500 bg-violet-900/20";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx("span",{children:"📰"})," Match History"]}),e.jsx("div",{className:"flex gap-2",children:["all","A","B"].map(h=>e.jsx("button",{onClick:()=>r(h),className:`px-3 py-1 rounded-lg text-sm ${a===h?"bg-purple-600":"bg-gray-100 hover:bg-gray-200"}`,children:h==="all"?"All":`Group ${h}`},h))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:n.filter(h=>h.type==="match").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Matches Played"})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:t.currentWeek||1}),e.jsx("div",{className:"text-sm text-gray-500",children:"Current Week"})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-600",children:t.status}),e.jsx("div",{className:"text-sm text-gray-500",children:"Season Status"})]})]}),e.jsx("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 max-h-[600px] overflow-y-auto scrollbar-thin",children:e.jsx("div",{className:"space-y-3",children:s.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No matches completed yet."}):s.map((h,k)=>e.jsx("div",{className:`border-l-4 ${m(h.group)} rounded-r-lg p-3 transition-all hover:translate-x-1`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:p(h.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:h.type==="superbowl"?e.jsx("span",{className:"text-xs bg-gradient-to-r from-amber-600 to-rose-600 px-2 py-0.5 rounded font-bold",children:"FINALE"}):h.type==="champion"?e.jsxs("span",{className:"text-xs bg-amber-600 px-2 py-0.5 rounded font-bold",children:["GROUP ",h.group," CHAMPION"]}):h.type==="playoff"?e.jsxs("span",{className:"text-xs bg-cyan-600 px-2 py-0.5 rounded",children:["Playoff ",h.round]}):h.type==="wildcard"?e.jsx("span",{className:"text-xs bg-purple-600 px-2 py-0.5 rounded",children:"Wildcard"}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${h.group==="A"?"bg-emerald-600":"bg-amber-600"}`,children:["Group ",h.group]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Week ",h.week]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{name:h.winner,size:"sm"}),e.jsx("span",{className:"font-bold text-green-600",children:h.winner}),e.jsx("span",{className:"text-gray-500",children:"defeated"}),e.jsx(E,{name:h.loser,size:"sm"}),e.jsx("span",{className:"text-red-500",children:h.loser}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",h.score1,"-",h.score2,")"]})]}),h.type==="champion"&&e.jsxs("p",{className:"text-sm text-amber-600 mt-1",children:["🎊 ",h.winner," is the Group ",h.group," Champion!"]}),h.type==="superbowl"&&e.jsxs("p",{className:"text-sm text-amber-600 mt-1",children:["🏆 ",h.winner," wins the Mammotome Ping Pong Finale!"]}),h.type==="wildcard"&&e.jsxs("p",{className:"text-sm text-purple-600 mt-1",children:["Earns wildcard to Group ",h.winnerGroup," playoffs"]})]})]})},k))})})]})}function gs(){var f,R,H,ee,le,de,ce,he,xe,u;const t=()=>{const l=window.location.hash.slice(1),g=["register","league","standings","schedule","mygames","profile","table","book","calendar","playoffs","history","archive","admin"];if(l&&g.includes(l))return l;const S=localStorage.getItem("pingpong_currentView");return S&&g.includes(S)?S:"league"},[a,r]=d.useState(t),n=l=>{r(l),window.location.hash=l,localStorage.setItem("pingpong_currentView",l)};d.useEffect(()=>{const l=()=>{const g=window.location.hash.slice(1);g&&["register","league","standings","schedule","mygames","profile","table","book","calendar","playoffs","history","archive","admin"].includes(g)&&(r(g),localStorage.setItem("pingpong_currentView",g))};return window.addEventListener("hashchange",l),()=>window.removeEventListener("hashchange",l)},[]);const[s,p]=d.useState(null),[m,h]=d.useState([]),[k,i]=d.useState(null),[o,b]=d.useState([]),[y,c]=d.useState(!0),[v,A]=d.useState(!1),[$,C]=d.useState(null),[P,I]=d.useState(""),[O,Q]=d.useState(()=>localStorage.getItem("pingpong_isAdmin")==="true"),[re,V]=d.useState(1),[U,q]=d.useState("A"),[W,se]=d.useState(()=>localStorage.getItem("pingpong_currentPlayer")||""),J=async l=>{if(se(l),localStorage.setItem("pingpong_currentPlayer",l),l&&"Notification"in window&&Notification.permission==="default")try{(await Te(l)).permission==="granted"&&ye("Welcome "+l+"!","You will receive match updates and notifications.")}catch{console.log("Notification permission request failed")}else if(l&&"Notification"in window&&Notification.permission==="granted")try{await je(l)}catch{console.log("Push subscription update failed")}},_=d.useCallback(async()=>{if(!(s&&m.length>0)){try{const[l,g,S,B]=await Promise.all([fetch(`${M}/season`),fetch(`${M}/players`),fetch(`${M}/season/swap-zone`),fetch(`${M}/league/matches`)]),j=await l.json(),x=await g.json(),F=await S.json(),Y=await B.json();p(j),h(x||[]),Ke(x||[]),i(F),b(Y||[]),j!=null&&j.currentWeek&&V(j.currentWeek)}catch(l){console.error("Error loading:",l)}c(!1)}},[s,m]);d.useEffect(()=>{["league","standings","schedule","mygames","playoffs","admin"].includes(a)?_():c(!1)},[a,_]);const te=async l=>{try{(await fetch(`${M}/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:l})})).ok?(Q(!0),localStorage.setItem("pingpong_isAdmin","true"),localStorage.setItem("adminPassword",l)):alert("Invalid password")}catch{alert("Login failed")}},ae=async(l,g)=>{try{(await fetch(`${M}/season/create`,{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Password":localStorage.getItem("adminPassword")||""},body:JSON.stringify({groupA:l,groupB:g,numWeeks:10,gamesPerPlayerA:gamesPerPlayerA?parseInt(gamesPerPlayerA):void 0,gamesPerPlayerB:gamesPerPlayerB?parseInt(gamesPerPlayerB):void 0})})).ok&&(await _(),n("standings"))}catch{alert("Failed to create season")}},z=async(l,g,S,B,j)=>{try{await fetch(`${M}/season/match`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({matchId:l,winner:g,loser:S,score1:B,score2:j})}),await _()}catch{alert("Failed to record result")}},X=async l=>{if(!$||!l){alert("Please select a score");return}const[g,S]=l.split("-").map(Number);if(!g||!S||g!==2&&S!==2){alert("Invalid score format. Must be 2-0, 2-1, 1-2, or 0-2");return}const B=g===2?$.player1:$.player2;try{const j=await fetch(`${M}/league/match/result`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({matchId:$.id,winner:B,score:l})});if(j.ok)A(!1),C(null),I(""),await _();else{const x=await j.json();alert(x.error||"Failed to record result")}}catch{alert("Failed to record result")}},w=async()=>{try{await fetch(`${M}/season/wildcard`,{method:"POST",headers:{"X-Admin-Password":localStorage.getItem("adminPassword")||""}}),await _()}catch{alert("Failed to start wildcard round")}},L=async()=>{try{await fetch(`${M}/season/playoffs`,{method:"POST",headers:{"X-Admin-Password":localStorage.getItem("adminPassword")||""}}),await _()}catch{alert("Failed to start playoffs")}},Z=async()=>{if(confirm("Execute mid-season review? This will swap bottom 3 from Group A with top 3 from Group B."))try{const l=await fetch(`${M}/season/mid-review`,{method:"POST",headers:{"X-Admin-Password":localStorage.getItem("adminPassword")||""}}),g=await l.json();l.ok?(alert(`Mid-season review complete!

Moved to Group B: ${g.swaps.fromAtoB.join(", ")}
Moved to Group A: ${g.swaps.fromBtoA.join(", ")}

${g.newMatchesCreated} new matches created.`),await _()):alert(g.error||"Failed to execute mid-season review")}catch{alert("Failed to execute mid-season review")}},T=()=>{Q(!1),localStorage.removeItem("pingpong_isAdmin"),localStorage.removeItem("adminPassword")},D=async()=>{if(confirm(`Archive current season and prepare for a new one?

This will:
- Save the current season to history
- Allow you to create a new season

Make sure the season is complete first!`))try{const l=await fetch(`${M}/season/archive`,{method:"POST",headers:{"X-Admin-Password":localStorage.getItem("adminPassword")||""}}),g=await l.json();l.ok?(alert(`Season archived as "${g.champion}'s Championship"!

You can now create a new season.`),await _()):alert(g.error||"Failed to archive season")}catch{alert("Failed to archive season")}},G=async()=>{if(!(!confirm(`WARNING: This will delete the current season without archiving!

Are you sure?`)||!confirm('This action cannot be undone. Type "DELETE" in the next prompt to confirm.')||prompt("Type DELETE to confirm:")!=="DELETE"))try{(await fetch(`${M}/season`,{method:"DELETE",headers:{"X-Admin-Password":localStorage.getItem("adminPassword")||""}})).ok&&(alert("Season deleted."),await _())}catch{alert("Failed to delete season")}},K=async(l,g)=>{try{const S=await fetch(`${M}/players`,{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Password":localStorage.getItem("adminPassword")||""},body:JSON.stringify([{name:l,seed:g}])});if(S.ok)await _(),alert(`Player "${l}" added successfully!`);else{const B=await S.json();alert(B.error||"Failed to add player")}}catch{alert("Failed to add player")}},oe=async l=>{try{await fetch(`${M}/players`,{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Password":localStorage.getItem("adminPassword")||""},body:JSON.stringify(l)});const g=await fetch(`${M}/bracket/generate`,{method:"POST",headers:{"X-Admin-Password":localStorage.getItem("adminPassword")||""}});if(g.ok)await _(),alert("Bracket created successfully!");else{const S=await g.json();alert(S.error||"Failed to create bracket")}}catch{alert("Failed to create bracket")}};return y?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-xl animate-pulse",children:"Loading..."})}):((R=(f=s==null?void 0:s.schedule)==null?void 0:f[U])!=null&&R[re-1],e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-40 shadow-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"🏓"}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-purple-900",children:(s==null?void 0:s.name)||"Mammotome Ping Pong League"}),e.jsx("p",{className:"text-xs text-gray-500",children:s?`Week ${s.currentWeek} of ${s.totalWeeks} • ${s.status==="playoffs"?"Playoffs":s.status==="complete"?"Complete":"Regular Season"}`:"No active season"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{currentPlayer:W}),e.jsx("button",{onClick:_,className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-600",title:"Refresh",children:e.jsx(ie.Refresh,{})}),O&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-purple-700 bg-purple-100 px-2 py-1 rounded font-semibold",children:"Admin"}),e.jsx("button",{onClick:T,className:"text-xs text-white bg-purple-600 hover:bg-purple-700 px-3 py-1 rounded",children:"Logout"})]})]})]}),e.jsxs("div",{className:"flex gap-1 overflow-x-auto items-center",children:[[{id:"register",icon:ie.Snowflake,label:"Register"},{id:"league",icon:ie.ChartBar,label:"League"},{id:"mygames",icon:ie.User,label:"My Games"},{id:"table",icon:ie.Clock,label:"Table"},{id:"playoffs",icon:ie.Trophy,label:"Playoffs"}].map(l=>e.jsxs("button",{onClick:()=>n(l.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${a===l.id||l.id==="league"&&["standings","schedule"].includes(a)||l.id==="mygames"&&a==="profile"||l.id==="table"&&["book","calendar"].includes(a)||l.id==="playoffs"&&["brackets","history","archive"].includes(a)?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-purple-100 hover:text-purple-700"}`,children:[e.jsx(l.icon,{}),l.label]},l.id)),e.jsxs("button",{onClick:()=>n("admin"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${a==="admin"?"bg-purple-600 text-white":O?"bg-gray-100 text-gray-700 hover:bg-purple-100 hover:text-purple-700":"bg-gray-50 text-gray-400 hover:bg-gray-100 hover:text-gray-600"}`,children:[e.jsx(ie.Cog,{}),O?"Admin":"Login"]})]})]})}),e.jsxs("main",{className:"max-w-6xl mx-auto p-4",children:[a==="register"&&e.jsx(is,{isAdmin:O,onRefresh:_}),(a==="league"||a==="standings"||a==="schedule")&&s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 border-b border-gray-200 pb-2",children:[e.jsx("button",{onClick:()=>n("standings"),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${a==="standings"||a==="league"?"bg-purple-100 text-purple-700 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Standings"}),e.jsx("button",{onClick:()=>n("schedule"),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${a==="schedule"?"bg-purple-100 text-purple-700 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Schedule"})]}),(a==="league"||a==="standings")&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(es,{swapZone:k}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(Ae,{standings:s.standings.A,groupName:"A",groupLabel:s.groups.A.name}),e.jsx(Ae,{standings:s.standings.B,groupName:"B",groupLabel:s.groups.B.name})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-600",children:"📋"})," League Format & Rules"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-600 mb-2",children:"Match Format"}),e.jsxs("ul",{className:"space-y-1 text-gray-700",children:[e.jsx("li",{children:"• Best of 3 games per match"}),e.jsx("li",{children:"• Valid scores: 2-0 or 2-1"}),e.jsx("li",{children:"• Winner gets 1 match win"}),e.jsx("li",{children:"• Individual games count for tiebreakers"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-amber-600 mb-2",children:"Tiebreaker Rules (in order)"}),e.jsxs("ol",{className:"space-y-1 text-gray-700 list-decimal list-inside",children:[e.jsx("li",{children:"Most match wins"}),e.jsx("li",{children:"Point differential (games won - lost)"}),e.jsx("li",{children:"Most total games won"}),e.jsx("li",{children:"Fewest games lost"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-cyan-400 mb-2",children:"Championship Bracket (8 Players)"}),e.jsxs("ul",{className:"space-y-1 text-gray-700",children:[e.jsx("li",{children:"• Top 4 from each group compete together"}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Quarterfinals:"})," Cross-group matchups"]}),e.jsx("li",{className:"ml-4 text-xs",children:"QF1: A#1 vs B#4 | QF2: B#2 vs A#3"}),e.jsx("li",{className:"ml-4 text-xs",children:"QF3: A#2 vs B#3 | QF4: B#1 vs A#4"}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Semifinals:"})," QF winners advance"]}),e.jsx("li",{className:"ml-4 text-xs",children:"SF1: QF1 vs QF2 | SF2: QF3 vs QF4"}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Final:"})," SF winners for championship"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-purple-600 mb-2",children:"Wildcard Round"}),e.jsxs("ul",{className:"space-y-1 text-gray-700",children:[e.jsx("li",{children:"• Group A #5 vs Group B #5"}),e.jsx("li",{children:"• Group A #6 vs Group B #6"}),e.jsx("li",{children:"• Winners replace #4 seed from their group"}),e.jsx("li",{children:"• Ensures best performers advance to championship"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-500 mb-2",children:"Mid-Season Review (Week 5)"}),e.jsxs("ul",{className:"space-y-1 text-gray-700",children:[e.jsx("li",{children:"• Bottom 3 from Group A move to Group B"}),e.jsx("li",{children:"• Top 3 from Group B move to Group A"}),e.jsx("li",{children:"• Keeps groups competitive and balanced"}),e.jsx("li",{children:"• New matches generated for swapped players"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-500 mb-2",children:"Bye Weeks (Odd Players)"}),e.jsxs("ul",{className:"space-y-1 text-gray-700",children:[e.jsx("li",{children:"• If a group has odd # of players, one sits out each week"}),e.jsx("li",{children:'• "Bye" rotates so each player gets rest'}),e.jsx("li",{children:"• Bye does not count as win or loss"})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-500 mb-2",children:"Table Legend"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"W"})," = Match Wins"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"L"})," = Match Losses"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"PF"})," = Games Won (Points For)"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"PA"})," = Games Lost (Points Against)"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Diff"})," = PF - PA"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Streak"})," = Current W/L streak"]})]})]})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-400",children:"📰"})," Recent Match Results"]}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto scrollbar-thin space-y-2",children:(()=>{var S,B;const l=[];["A","B"].forEach(j=>{var x,F;(F=(x=s.schedule)==null?void 0:x[j])==null||F.forEach((Y,N)=>{Y.forEach(ne=>{ne.completed&&ne.winner&&l.push({...ne,group:j,week:N+1,sortKey:N*1e3+Math.random()})})})}),(S=s.wildcard)!=null&&S.matches&&s.wildcard.matches.forEach(j=>{j.completed&&l.push({...j,type:"wildcard",sortKey:1e4})}),s.playoffs&&["A","B"].forEach(j=>{var x,F,Y,N;(F=(x=s.playoffs[j])==null?void 0:x.semifinals)==null||F.forEach(ne=>{ne.completed&&l.push({...ne,group:j,type:"playoff",sortKey:11e3})}),(N=(Y=s.playoffs[j])==null?void 0:Y.final)!=null&&N.completed&&l.push({...s.playoffs[j].final,group:j,type:"final",sortKey:12e3})}),(B=s.superBowl)!=null&&B.completed&&l.push({...s.superBowl,type:"superbowl",sortKey:13e3});const g=l.sort((j,x)=>x.sortKey-j.sortKey).slice(0,20);return g.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No matches completed yet."}):g.map((j,x)=>e.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg ${j.type==="superbowl"?"bg-gradient-to-r from-amber-900/30 to-rose-900/30 border border-amber-600":j.type==="final"?"bg-amber-900/20 border-l-4 border-amber-500":j.type==="playoff"?"bg-cyan-900/20 border-l-4 border-cyan-500":j.type==="wildcard"?"bg-violet-900/20 border-l-4 border-violet-500":j.group==="A"?"bg-emerald-900/10 border-l-4 border-emerald-600":"bg-amber-900/10 border-l-4 border-amber-600"}`,children:[e.jsx("span",{className:"text-lg",children:j.type==="superbowl"?"🏆":j.type==="final"?"👑":j.type==="playoff"?"⚔️":j.type==="wildcard"?"⚡":"🏓"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-1 text-sm",children:e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${j.type==="superbowl"?"bg-amber-600":j.type==="final"?"bg-amber-700":j.type==="playoff"?"bg-cyan-600":j.type==="wildcard"?"bg-purple-600":j.group==="A"?"bg-emerald-700":"bg-amber-700"}`,children:j.type==="superbowl"?"FINALE":j.type==="final"?`G${j.group} Final`:j.type==="playoff"?`G${j.group} Playoff`:j.type==="wildcard"?"Wildcard":`G${j.group} W${j.week}`})}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("span",{className:"font-semibold text-green-600 truncate",children:j.winner}),e.jsx("span",{className:"text-gray-500 text-xs",children:"beat"}),e.jsx("span",{className:"text-red-500 truncate",children:j.loser}),e.jsxs("span",{className:"text-gray-500 text-xs ml-1",children:["(",j.score1,"-",j.score2,")"]})]})]})]},x))})()})]})]}),a==="schedule"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>q("A"),className:`px-4 py-2 rounded-lg ${U==="A"?"bg-emerald-600":"bg-gray-100"}`,children:"Group A"}),e.jsx("button",{onClick:()=>q("B"),className:`px-4 py-2 rounded-lg ${U==="B"?"bg-amber-600":"bg-gray-100"}`,children:"Group B"})]}),(()=>{const l=s.currentWeek||1,g=3;return(l<=g?Array.from({length:Math.min(4,s.totalWeeks)},(B,j)=>j+1):Array.from({length:s.totalWeeks},(B,j)=>j+1)).map(B=>{var F,Y;const x=(((Y=(F=s==null?void 0:s.schedule)==null?void 0:F[U])==null?void 0:Y[B-1])||[]).filter(N=>!N.cancelled);return e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-bold",children:["Week ",B," - Group ",U]}),B===l&&e.jsx("span",{className:"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-xs font-semibold",children:"Current Week"}),B===g&&l<g&&e.jsx("span",{className:"bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-xs font-semibold",children:"Swap Week"})]}),x.length>0?e.jsx(ss,{matches:x,week:B,onRecordResult:z}):e.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"No matches scheduled for this week"})]},B)})})(),O&&(s==null?void 0:s.status)==="regular"&&s.currentWeek>=Math.floor(s.totalWeeks/2)&&!((H=s.midSeasonReview)!=null&&H.completed)&&e.jsxs("div",{className:"bg-gradient-to-r from-rose-900/30 to-amber-900/30 border border-rose-500/30 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"text-red-500",children:"🔄"})," Mid-Season Review Available"]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-3",children:["Week ",s.currentWeek," reached! Time to balance the groups."]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4 text-sm",children:[e.jsxs("div",{className:"bg-gray-100/50 rounded-lg p-3",children:[e.jsx("h4",{className:"text-red-500 font-semibold mb-2",children:"⬇️ Moving to Group B"}),e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Bottom 3 from Group A"}),e.jsx("p",{className:"text-gray-700",children:"Will face easier competition"})]}),e.jsxs("div",{className:"bg-gray-100/50 rounded-lg p-3",children:[e.jsx("h4",{className:"text-green-600 font-semibold mb-2",children:"⬆️ Moving to Group A"}),e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Top 3 from Group B"}),e.jsx("p",{className:"text-gray-700",children:"Earned their spot with stronger players"})]})]}),e.jsx("button",{onClick:Z,className:"w-full bg-rose-600 hover:bg-rose-500 py-2 rounded-lg font-semibold",children:"Execute Mid-Season Review"})]}),((ee=s==null?void 0:s.midSeasonReview)==null?void 0:ee.completed)&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600",children:"✓"})," Mid-Season Review Completed"]}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Week ",s.midSeasonReview.week]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-500 font-semibold mb-1",children:"Moved to Group B:"}),e.jsx("p",{className:"text-gray-700",children:((de=(le=s.midSeasonReview.swaps)==null?void 0:le.fromAtoB)==null?void 0:de.join(", "))||"None"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-green-600 font-semibold mb-1",children:"Moved to Group A:"}),e.jsx("p",{className:"text-gray-700",children:((he=(ce=s.midSeasonReview.swaps)==null?void 0:ce.fromBtoA)==null?void 0:he.join(", "))||"None"})]})]})]})]})]}),(a==="league"||a==="standings"||a==="schedule")&&!s&&e.jsxs("div",{children:[o.length>0?e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"🏆"}),"Single-Elimination Bracket Tournament"]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-purple-900 font-semibold mb-1",children:"📋 Tournament Format:"}),e.jsxs("ul",{className:"text-xs text-purple-800 space-y-1 ml-4",children:[e.jsx("li",{children:"• Single-elimination bracket (lose once = eliminated)"}),e.jsx("li",{children:"• Win your match to advance to next round"}),e.jsx("li",{children:"• Play matches anytime before next round starts"}),e.jsx("li",{children:"• Final winner becomes tournament champion"})]})]})]}),Array.from(new Set(o.map(l=>l.round))).sort((l,g)=>l-g).map(l=>{const g=o.filter(x=>x.round===l),S=g.length,B=g.filter(x=>x.completed).length,j=l===1&&g.some(x=>x.scheduled_week);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-600",children:["Round ",l,l===1&&S===16&&" (Round of 32)",l===2&&S===8&&" (Round of 16)",l===3&&S===4&&" (Quarterfinals)",l===4&&S===2&&" (Semifinals)",l===5&&S===1&&" (Final)"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[B,"/",S," complete"]})]}),j?Array.from(new Set(g.map(x=>x.scheduled_week))).sort().map(x=>{const F=g.filter(N=>N.scheduled_week===x),Y=F.filter(N=>N.completed).length;return e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 mb-2",children:[e.jsxs("span",{className:"text-sm font-bold text-blue-900",children:["Week ",x," Schedule"]}),e.jsxs("span",{className:"text-xs text-blue-700 ml-2",children:["(",Y,"/",F.length," complete)"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:F.map(N=>e.jsxs("div",{className:`border rounded-lg p-4 ${N.completed?"bg-gray-50 border-gray-300":"bg-white border-purple-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["Match ",N.match_number]}),N.completed&&e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Complete"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${N.completed&&N.winner===N.player1?"bg-green-100 font-semibold":N.player1===W?"bg-blue-100 border-2 border-blue-500":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[N.seed1?e.jsxs("span",{className:"text-xs bg-purple-200 text-purple-700 px-1.5 py-0.5 rounded font-semibold",children:["#",N.seed1]}):N.player1&&N.player1!=="BYE"&&N.player1!=="TBD"?e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-1.5 py-0.5 rounded text-[10px]",children:"Unseeded"}):null,e.jsxs("span",{className:N.player1==="BYE"?"text-gray-400 italic":N.player1===W?"font-bold text-blue-700":"",children:[N.player1===W&&"👤 ",N.player1||"TBD"]})]}),N.completed&&N.winner===N.player1&&e.jsx("span",{className:"text-green-600",children:"✓"})]}),e.jsx("div",{className:"text-center text-xs text-gray-400 font-semibold",children:"VS"}),e.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${N.completed&&N.winner===N.player2?"bg-green-100 font-semibold":N.player2===W?"bg-blue-100 border-2 border-blue-500":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[N.seed2?e.jsxs("span",{className:"text-xs bg-purple-200 text-purple-700 px-1.5 py-0.5 rounded font-semibold",children:["#",N.seed2]}):N.player2&&N.player2!=="BYE"&&N.player2!=="TBD"?e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-1.5 py-0.5 rounded text-[10px]",children:"Unseeded"}):null,e.jsxs("span",{className:N.player2==="BYE"?"text-gray-400 italic":N.player2===W?"font-bold text-blue-700":"",children:[N.player2===W&&"👤 ",N.player2||"TBD"]})]}),N.completed&&N.winner===N.player2&&e.jsx("span",{className:"text-green-600",children:"✓"})]})]}),N.score&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 text-center",children:["Score: ",N.score]}),N.is_bye&&e.jsx("div",{className:"mt-2 text-xs text-amber-600 text-center font-semibold",children:"BYE - Winner advances automatically"}),!N.completed&&!N.is_bye&&N.player1&&N.player2&&N.player1!=="TBD"&&N.player2!=="TBD"&&(O||N.player1===W||N.player2===W)&&e.jsx("button",{onClick:()=>{C(N),A(!0)},className:"mt-3 w-full bg-purple-600 hover:bg-purple-500 text-white px-3 py-2 rounded text-sm font-semibold",children:"Record Score"})]},N.id))})]},x)}):e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:g.map(x=>e.jsxs("div",{className:`border rounded-lg p-4 ${x.completed?"bg-gray-50 border-gray-300":"bg-white border-purple-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["Match ",x.match_number]}),x.completed&&e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Complete"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${x.completed&&x.winner===x.player1?"bg-green-100 font-semibold":x.player1===W?"bg-blue-100 border-2 border-blue-500":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x.seed1?e.jsxs("span",{className:"text-xs bg-purple-200 text-purple-700 px-1.5 py-0.5 rounded font-semibold",children:["#",x.seed1]}):x.player1&&x.player1!=="BYE"&&x.player1!=="TBD"?e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-1.5 py-0.5 rounded text-[10px]",children:"Unseeded"}):null,e.jsxs("span",{className:x.player1==="BYE"?"text-gray-400 italic":x.player1===W?"font-bold text-blue-700":"",children:[x.player1===W&&"👤 ",x.player1||"TBD"]})]}),x.completed&&x.winner===x.player1&&e.jsx("span",{className:"text-green-600",children:"✓"})]}),e.jsx("div",{className:"text-center text-xs text-gray-400 font-semibold",children:"VS"}),e.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${x.completed&&x.winner===x.player2?"bg-green-100 font-semibold":x.player2===W?"bg-blue-100 border-2 border-blue-500":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x.seed2?e.jsxs("span",{className:"text-xs bg-purple-200 text-purple-700 px-1.5 py-0.5 rounded font-semibold",children:["#",x.seed2]}):x.player2&&x.player2!=="BYE"&&x.player2!=="TBD"?e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-1.5 py-0.5 rounded text-[10px]",children:"Unseeded"}):null,e.jsxs("span",{className:x.player2==="BYE"?"text-gray-400 italic":x.player2===W?"font-bold text-blue-700":"",children:[x.player2===W&&"👤 ",x.player2||"TBD"]})]}),x.completed&&x.winner===x.player2&&e.jsx("span",{className:"text-green-600",children:"✓"})]})]}),x.score&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 text-center",children:["Score: ",x.score]}),x.is_bye&&e.jsx("div",{className:"mt-2 text-xs text-amber-600 text-center font-semibold",children:"BYE - Winner advances automatically"}),!x.completed&&!x.is_bye&&x.player1&&x.player2&&x.player1!=="TBD"&&x.player2!=="TBD"&&(O||x.player1===W||x.player2===W)&&e.jsx("button",{onClick:()=>{C(x),A(!0)},className:"mt-3 w-full bg-purple-600 hover:bg-purple-500 text-white px-3 py-2 rounded text-sm font-semibold",children:"Record Score"})]},x.id))})]},l)})]}):e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏆"}),e.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-800",children:"No Bracket Tournament Active"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start a single-elimination bracket tournament to begin play"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md mx-auto",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"To start a bracket tournament:"}),e.jsxs("ol",{className:"text-xs text-blue-800 text-left space-y-1",children:[e.jsxs("li",{children:["1. Go to ",e.jsx("span",{className:"font-bold",children:"Register"})," tab"]}),e.jsx("li",{children:"2. Review all player registrations"}),e.jsxs("li",{children:["3. Click ",e.jsx("span",{className:"font-bold",children:'"Generate Bracket from Registrations"'})]}),e.jsx("li",{children:"4. Return here to see the bracket and play matches"})]})]})]}),v&&$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Record Match Result"}),e.jsxs("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Round ",$.round," - Match ",$.match_number]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("span",{className:"text-lg font-bold text-blue-600",children:$.player1}),e.jsx("span",{className:"text-gray-400 font-semibold",children:"VS"}),e.jsx("span",{className:"text-lg font-bold text-red-600",children:$.player2})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-3 text-center",children:"Best of 3 Games - Select Final Score"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>X("2-0"),className:"bg-blue-600 hover:bg-blue-500 text-white p-4 rounded-lg font-semibold flex flex-col items-center gap-2 transition-all hover:scale-105",children:[e.jsx("span",{className:"text-sm opacity-80",children:$.player1}),e.jsx("span",{className:"text-2xl",children:"2-0"}),e.jsx("span",{className:"text-xs opacity-80",children:"Wins 2 games straight"})]}),e.jsxs("button",{onClick:()=>X("0-2"),className:"bg-red-600 hover:bg-red-500 text-white p-4 rounded-lg font-semibold flex flex-col items-center gap-2 transition-all hover:scale-105",children:[e.jsx("span",{className:"text-sm opacity-80",children:$.player2}),e.jsx("span",{className:"text-2xl",children:"2-0"}),e.jsx("span",{className:"text-xs opacity-80",children:"Wins 2 games straight"})]}),e.jsxs("button",{onClick:()=>X("2-1"),className:"bg-blue-500 hover:bg-blue-400 text-white p-4 rounded-lg font-semibold flex flex-col items-center gap-2 transition-all hover:scale-105",children:[e.jsx("span",{className:"text-sm opacity-80",children:$.player1}),e.jsx("span",{className:"text-2xl",children:"2-1"}),e.jsx("span",{className:"text-xs opacity-80",children:"Wins after losing 1 game"})]}),e.jsxs("button",{onClick:()=>X("1-2"),className:"bg-red-500 hover:bg-red-400 text-white p-4 rounded-lg font-semibold flex flex-col items-center gap-2 transition-all hover:scale-105",children:[e.jsx("span",{className:"text-sm opacity-80",children:$.player2}),e.jsx("span",{className:"text-2xl",children:"2-1"}),e.jsx("span",{className:"text-xs opacity-80",children:"Wins after losing 1 game"})]})]}),e.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"Score format: [Player 1 games won] - [Player 2 games won]"})]}),e.jsx("button",{onClick:()=>{A(!1),C(null),I("")},className:"w-full bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-semibold",children:"Cancel"})]})})]}),(a==="table"||a==="book"||a==="calendar")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 border-b border-gray-200 pb-2",children:[e.jsx("button",{onClick:()=>n("book"),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${a==="book"||a==="table"?"bg-purple-100 text-purple-700 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Book Table"}),e.jsx("button",{onClick:()=>n("calendar"),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${a==="calendar"?"bg-purple-100 text-purple-700 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Calendar"})]}),(a==="table"||a==="book")&&e.jsx(ls,{players:m,season:s,currentPlayer:W,onSelectPlayer:J}),a==="calendar"&&e.jsx(ds,{})]}),(a==="mygames"||a==="profile")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 border-b border-gray-200 pb-2",children:[e.jsx("button",{onClick:()=>n("mygames"),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${a==="mygames"?"bg-purple-100 text-purple-700 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"My Matches"}),e.jsx("button",{onClick:()=>n("profile"),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${a==="profile"?"bg-purple-100 text-purple-700 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Profile"})]}),a==="mygames"&&e.jsx(ps,{players:m,season:s,currentPlayer:W,onSelectPlayer:J}),a==="profile"&&e.jsx(os,{playerName:W,onSelectPlayer:l=>{n("profile")}})]}),(a==="playoffs"||a==="brackets"||a==="history"||a==="archive")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 border-b border-gray-200 pb-2",children:[e.jsx("button",{onClick:()=>n("playoffs"),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${a==="playoffs"||a==="brackets"?"bg-purple-100 text-purple-700 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Brackets"}),e.jsx("button",{onClick:()=>n("history"),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${a==="history"?"bg-purple-100 text-purple-700 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"History"}),e.jsx("button",{onClick:()=>n("archive"),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${a==="archive"?"bg-purple-100 text-purple-700 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Past Seasons"})]}),(a==="playoffs"||a==="brackets")&&e.jsxs("div",{className:"space-y-4",children:[(s==null?void 0:s.status)==="regular"&&O&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Regular season in progress. Start wildcard round or go directly to playoffs."}),e.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[e.jsx("button",{onClick:w,className:"bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-lg font-semibold",children:"Start Wildcard Round"}),e.jsx("button",{onClick:L,className:"bg-amber-600 hover:bg-amber-500 px-6 py-2 rounded-lg font-semibold",children:"Skip to Playoffs"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Wildcard: Group A #5-6 vs Group B #5-6 - winners earn playoff spot in their own group"})]}),(s==null?void 0:s.status)==="wildcard"&&e.jsxs(e.Fragment,{children:[e.jsx(as,{wildcard:s.wildcard,onRecordResult:z}),O&&((u=(xe=s.wildcard)==null?void 0:xe.matches)==null?void 0:u.every(l=>l.completed))&&e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-green-600 mb-4",children:"Wildcard round complete! Start playoffs."}),e.jsx("button",{onClick:L,className:"bg-amber-600 hover:bg-amber-500 px-6 py-2 rounded-lg font-semibold",children:"Start Playoffs"})]})]}),(s==null?void 0:s.championship)&&e.jsx(ts,{championship:s.championship,onRecordResult:z}),(s==null?void 0:s.playoffs)&&!(s!=null&&s.championship)&&e.jsxs(e.Fragment,{children:[e.jsx(Be,{playoff:s.playoffs.A,groupName:"A",onRecordResult:z}),e.jsx(Be,{playoff:s.playoffs.B,groupName:"B",onRecordResult:z})]}),(s==null?void 0:s.superBowl)&&!(s!=null&&s.championship)&&e.jsx(rs,{match:s.superBowl,onRecordResult:z}),(s==null?void 0:s.champion)&&e.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 rounded-2xl p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏆"}),e.jsx("div",{className:"text-3xl font-bold",children:s.champion}),e.jsx("div",{className:"text-violet-200 text-xl",children:"Season Champion!"})]}),!(s!=null&&s.playoffs)&&!(s!=null&&s.wildcard)&&(s==null?void 0:s.status)!=="regular"&&e.jsx("p",{className:"text-center text-gray-500",children:"No playoff data available."})]}),a==="history"&&e.jsx(hs,{season:s}),a==="archive"&&e.jsx(cs,{})]}),a==="admin"&&e.jsx(xs,{players:m,season:s,onCreateSeason:ae,isAdmin:O,onLogin:te,onAddPlayer:K,onCreateBracket:oe,onArchiveSeason:D,onClearSeason:G})]}),e.jsx(Xe,{})]}))}be.createRoot(document.getElementById("root")).render(e.jsx(Fe.StrictMode,{children:e.jsx(gs,{})}));
